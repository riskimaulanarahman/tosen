import{u as U,r as C,m as z,c as _,f as A,a as r,b as n,h as l,i as $,w as i,e,k as I,d as x,q as y,t as o,o as d,F as g,j as b,n as M,I as S,l as N,p as E,v as p,G as V,A as h,x as B}from"./app-Bz8NXQHf.js";import{A as P}from"./AuthenticatedLayout-DPPCjjNc.js";import{_ as c}from"./Card.vue_vue_type_script_setup_true_lang-B3Ih3BVq.js";import{_ as k}from"./Button.vue_vue_type_script_setup_true_lang-CEveZ12M.js";import{B as G}from"./Breadcrumb-D4kYmMrk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"space-y-6"},K={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},O={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Q={class:"p-6"},W={class:"flex items-center"},X={class:"ml-4"},Y={class:"text-2xl font-bold text-text"},Z={class:"p-6"},ee={class:"flex items-center"},te={class:"ml-4"},se={class:"text-2xl font-bold text-text"},ae={class:"p-6"},le={class:"flex items-center"},oe={class:"ml-4"},de={class:"text-2xl font-bold text-text"},re={class:"p-6"},ne={class:"flex items-center"},ie={class:"ml-4"},ue={class:"text-2xl font-bold text-text"},xe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},me={class:"space-y-4"},pe={class:"flex justify-between items-center"},ce={class:"font-semibold text-text"},fe={class:"text-sm text-muted"},ve={class:"text-right"},_e={class:"mt-2"},ye={class:"w-full bg-gray-200 rounded-full h-2"},ge={class:"text-xs text-muted mt-1"},be={class:"overflow-x-auto"},he={class:"min-w-full divide-y divide-border"},ke={class:"bg-surface-1 divide-y divide-border"},we={class:"px-6 py-4 whitespace-nowrap"},Ce={class:"flex items-center"},Me={class:"px-6 py-4 whitespace-nowrap"},Se={class:"px-6 py-4 whitespace-nowrap"},Ve={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Be={class:"p-6"},De=["value"],Re={key:0,class:"text-sm text-danger mt-1"},Te={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},je={key:0,class:"text-sm text-danger mt-1"},Le={key:0,class:"text-sm text-danger mt-1"},qe={class:"flex items-center"},Fe={key:0,class:"mt-2"},He={key:0,class:"text-sm text-danger mt-1"},Ue={class:"flex items-center"},ze={key:0,class:"text-sm text-danger mt-1"},Ae={class:"flex justify-end space-x-4"},Oe={__name:"Index",setup($e){const f=U();C(!1);const m=C(!1),a=z({leave_type_id:"",start_date:"",end_date:"",is_half_day:!1,half_day_type:"first_half",emergency_leave:!1,reason:""}),D=_(()=>f.props.leaveBalances),R=_(()=>f.props.leaveRequests.data),v=_(()=>f.props.statistics),T=_(()=>f.props.leaveTypes),j=[{name:"Dashboard",href:route("dashboard")},{name:"Manajemen Cuti"}],w=()=>{m.value=!m.value,m.value||a.reset()},L=()=>{a.post(route("leave.store"),{onSuccess:()=>{a.reset(),m.value=!1}})},q=u=>({pending:"bg-warning-100 text-warning-800",approved:"bg-success-100 text-success-800",rejected:"bg-danger-100 text-danger-800",cancelled:"bg-gray-100 text-gray-800"})[u]||"bg-gray-100 text-gray-800",F=u=>({pending:"â³",approved:"âœ…",rejected:"âŒ",cancelled:"ðŸš«"})[u]||"â“",H=u=>u.is_half_day?`Half Day (${u.half_day_type==="first_half"?"First Half":"Second Half"})`:u.days_count===1?"1 Day":`${u.days_count} Days`;return A(()=>{}),(u,t)=>(d(),r(g,null,[n(l($),{title:"Leave Management"}),n(P,null,{breadcrumb:i(()=>[n(G,{items:j})]),default:i(()=>[e("div",J,[e("div",K,[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-3xl font-bold text-text"}," Leave Management "),e("p",{class:"text-muted"}," Manage your leave requests and balances ")],-1)),n(k,{onClick:w,variant:"primary"},{default:i(()=>[y(o(m.value?"Tutup Form":"Request Leave"),1)]),_:1})]),e("div",O,[n(c,null,{default:i(()=>[e("div",Q,[e("div",W,[t[10]||(t[10]=e("div",{class:"flex-shrink-0 bg-primary-100 rounded-lg p-3"},[e("svg",{class:"w-6 h-6 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002 2V7a2 2 0 00-2-2h-2M9 5a2 2 0 001-1v-1m3-2V8a2 2 0 00-2 2v6a2 2 0 002 2zm6-4V7a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})])],-1)),e("div",X,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-text"}," Total Requests ",-1)),e("p",Y,o(v.value.total_requests),1)])])])]),_:1}),n(c,null,{default:i(()=>[e("div",Z,[e("div",ee,[t[12]||(t[12]=e("div",{class:"flex-shrink-0 bg-success-100 rounded-lg p-3"},[e("svg",{class:"w-6 h-6 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})])],-1)),e("div",te,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-text"}," Approved ",-1)),e("p",se,o(v.value.approved_requests),1)])])])]),_:1}),n(c,null,{default:i(()=>[e("div",ae,[e("div",le,[t[14]||(t[14]=e("div",{class:"flex-shrink-0 bg-info-100 rounded-lg p-3"},[e("svg",{class:"w-6 h-6 text-info",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",oe,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-text"}," Days Taken ",-1)),e("p",de,o(v.value.total_days_taken),1)])])])]),_:1}),n(c,null,{default:i(()=>[e("div",re,[e("div",ne,[t[16]||(t[16]=e("div",{class:"flex-shrink-0 bg-orange-100 rounded-lg p-3"},[e("svg",{class:"w-6 h-6 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3-1.343-3-3S8.343 2 6 2 3s3 1.343 3 3 3 1.657 0 3 1.657z"})])],-1)),e("div",ie,[t[15]||(t[15]=e("p",{class:"text-sm font-medium text-text"}," Pending ",-1)),e("p",ue,o(v.value.pending_requests),1)])])])]),_:1})]),e("div",xe,[n(c,null,{default:i(()=>[t[18]||(t[18]=e("h2",{class:"text-xl font-bold text-text mb-6"}," Leave Balances ",-1)),e("div",me,[(d(!0),r(g,null,b(D.value,s=>(d(),r("div",{key:s.leave_type.id,class:"border-b border-border pb-4 last:border-0"},[e("div",pe,[e("div",null,[e("h3",ce,o(s.leave_type.name),1),e("p",fe,o(s.leave_type.description),1)]),e("div",ve,[e("div",{class:M(["text-2xl font-bold",{"text-success":s.balance.remaining_days>5,"text-warning":s.balance.remaining_days>0&&s.balance.remaining_days<=5,"text-danger":s.balance.remaining_days<=0}])},o(s.balance.remaining_days),3),t[17]||(t[17]=e("div",{class:"text-sm text-muted"}," days remaining ",-1))])]),e("div",_e,[e("div",ye,[e("div",{class:"bg-primary-600 h-2 rounded-full",style:S({width:s.balance.usage_percentage+"%"})},null,4)]),e("div",ge,o(s.balance.usage_percentage)+"% used ",1)])]))),128))])]),_:1}),n(c,null,{default:i(()=>[t[21]||(t[21]=e("h2",{class:"text-xl font-bold text-text mb-6"}," Recent Leave Requests ",-1)),e("div",be,[e("table",he,[t[20]||(t[20]=e("thead",{class:"bg-surface-1"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-text uppercase tracking-wider"}," Type "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-text uppercase tracking-wider"}," Duration "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-text uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-text uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",ke,[(d(!0),r(g,null,b(R.value,s=>(d(),r("tr",{key:s.id},[e("td",we,[e("div",Ce,[e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",style:S({backgroundColor:s.leave_type.color_code+"20",color:"white"})},o(s.leave_type.name),5)])]),e("td",Me,o(H(s)),1),e("td",Se,[e("span",{class:M(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",q(s.status)])},o(F(s.status))+" "+o(s.status),3)]),e("td",Ve,[n(l(N),{href:u.route("leave.show",s.id),class:"text-primary hover:text-primary-400 mr-3"},{default:i(()=>[...t[19]||(t[19]=[y(" View ",-1)])]),_:1},8,["href"]),s.status==="pending"?(d(),r("button",{key:0,onClick:t[0]||(t[0]=Ie=>m.value=!0),class:"text-danger hover:text-danger-400"}," Cancel ")):x("",!0)])]))),128))])])])]),_:1})])]),m.value?(d(),I(c,{key:0,class:"mt-6"},{default:i(()=>[e("div",Be,[t[31]||(t[31]=e("h2",{class:"text-2xl font-bold text-text mb-6"},"Request Leave",-1)),e("form",{onSubmit:E(L,["prevent"]),class:"space-y-6"},[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-text mb-2"},"Leave Type",-1)),p(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>l(a).leave_type_id=s),required:"",class:"w-full px-4 py-2 border border-border rounded-lg bg-surface-1 text-text"},[t[22]||(t[22]=e("option",{value:""},"Select Leave Type",-1)),(d(!0),r(g,null,b(T.value,s=>(d(),r("option",{key:s.id,value:s.id},o(s.name)+" ("+o(s.max_days_per_year)+" days/year) ",9,De))),128))],512),[[V,l(a).leave_type_id]]),l(a).errors.leave_type_id?(d(),r("div",Re,o(l(a).errors.leave_type_id),1)):x("",!0)]),e("div",Te,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-text mb-2"},"Start Date",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>l(a).start_date=s),required:"",class:"w-full px-4 py-2 border border-border rounded-lg bg-surface-1 text-text"},null,512),[[h,l(a).start_date]]),l(a).errors.start_date?(d(),r("div",je,o(l(a).errors.start_date),1)):x("",!0)]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-text mb-2"},"End Date",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=s=>l(a).end_date=s),required:"",class:"w-full px-4 py-2 border border-border rounded-lg bg-surface-1 text-text"},null,512),[[h,l(a).end_date]]),l(a).errors.end_date?(d(),r("div",Le,o(l(a).errors.end_date),1)):x("",!0)])]),e("div",null,[e("label",qe,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=s=>l(a).is_half_day=s),class:"mr-2"},null,512),[[B,l(a).is_half_day]]),t[26]||(t[26]=e("span",{class:"text-sm font-medium text-text"},"Half Day",-1))]),l(a).is_half_day?(d(),r("div",Fe,[p(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>l(a).half_day_type=s),required:"",class:"w-full px-4 py-2 border border-border rounded-lg bg-surface-1 text-text"},[...t[27]||(t[27]=[e("option",{value:"first_half"},"First Half",-1),e("option",{value:"second_half"},"Second Half",-1)])],512),[[V,l(a).half_day_type]]),l(a).errors.half_day_type?(d(),r("div",He,o(l(a).errors.half_day_type),1)):x("",!0)])):x("",!0)]),e("div",null,[e("label",Ue,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=s=>l(a).emergency_leave=s),class:"mr-2"},null,512),[[B,l(a).emergency_leave]]),t[28]||(t[28]=e("span",{class:"text-sm font-medium text-text"},"Emergency Leave",-1))])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-text mb-2"},"Reason",-1)),p(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>l(a).reason=s),required:"",rows:"4",class:"w-full px-4 py-2 border border-border rounded-lg bg-surface-1 text-text",placeholder:"Please provide a reason for your leave request..."},null,512),[[h,l(a).reason]]),l(a).errors.reason?(d(),r("div",ze,o(l(a).errors.reason),1)):x("",!0)]),e("div",Ae,[n(k,{type:"button",onClick:w,variant:"secondary"},{default:i(()=>[...t[30]||(t[30]=[y(" Cancel ",-1)])]),_:1}),n(k,{type:"submit",disabled:l(a).processing,variant:"primary"},{default:i(()=>[y(o(l(a).processing?"Submitting...":"Submit Request"),1)]),_:1},8,["disabled"])])],32)])]),_:1})):x("",!0)]),_:1})],64))}};export{Oe as default};

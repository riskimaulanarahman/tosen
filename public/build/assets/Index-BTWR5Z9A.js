import{u as K,c as V,r as A,a as p,b as l,h as f,i as q,w as r,e as t,d as y,k as H,q as o,t as d,l as c,o as u,v as k,A as w,G as E,F as P,j as N,n as j,B as O}from"./app-LYI9ClMC.js";import{A as J}from"./AuthenticatedLayout-Cl7_EZZK.js";import{_ as h}from"./Card.vue_vue_type_script_setup_true_lang-T8rMks-o.js";import{_ as m}from"./Button.vue_vue_type_script_setup_true_lang-PLCSh3nU.js";import{B as Z}from"./Breadcrumb-Co-N1MHA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"space-y-6"},W={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},X={class:"flex flex-wrap gap-2 justify-end"},Y={key:0,class:"bg-success-900/20 border border-success-700 text-success-100 p-4 rounded-lg"},tt={key:1,class:"bg-danger-900/20 border border-danger-700 text-danger-100 p-4 rounded-lg"},et={class:"p-4 space-y-4"},st={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},at={class:"flex items-end gap-2"},lt={class:"grid grid-cols-1 xl:grid-cols-3 gap-6"},rt={class:"p-6 space-y-4"},ot={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},nt={class:"text-sm text-muted"},dt={class:"overflow-x-auto"},it={class:"min-w-full divide-y divide-border text-sm"},ut={class:"bg-surface-1 divide-y divide-border"},pt={key:0},mt={class:"px-6 py-4"},ft={class:"font-semibold text-text"},ct={class:"text-xs text-muted"},xt={class:"px-6 py-4"},bt={class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-surface-2 text-text"},yt={class:"px-6 py-4"},gt={class:"font-medium text-text"},vt={class:"text-xs text-muted"},_t={class:"px-6 py-4"},kt={class:"px-6 py-4 text-right space-x-2"},ht={key:0,class:"flex flex-wrap gap-2 pt-4 justify-center"},wt={class:"space-y-6"},Pt={class:"p-6 space-y-3"},jt={class:"space-y-2"},Ft={__name:"Index",props:{payrollPeriods:{type:Object,default:()=>({data:[],links:[]})},filters:{type:Object,default:()=>({})}},setup($){var S,C,M,B;const x=$,z=K(),g=V(()=>z.props.flash||{}),b=V(()=>x.payrollPeriods||{data:[],links:[]}),v=A(!1),G=[{name:"Dashboard",href:route("dashboard")},{name:"Manajemen Penggajian"}],i=A({outlet_id:((S=x.filters)==null?void 0:S.outlet_id)||"",status:((C=x.filters)==null?void 0:C.status)||"",date_from:((M=x.filters)==null?void 0:M.date_from)||"",date_to:((B=x.filters)==null?void 0:B.date_to)||""}),D=a=>{if(!a)return"-";const e=typeof a=="string"?a.split("T")[0].split(" ")[0]:a,_=new Date(`${e}T00:00:00`);return new Intl.DateTimeFormat("id-ID",{year:"numeric",month:"short",day:"numeric",timeZone:"Asia/Jakarta"}).format(_)},L=a=>a==null?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(Number(a)),T=()=>{O.get(route("payroll.index"),i.value,{preserveScroll:!0,preserveState:!0})},U=()=>{i.value={outlet_id:"",status:"",date_from:"",date_to:""},T()},R=a=>{a!=null&&a.id&&confirm(`Hapus periode "${a.name}"? Tindakan ini tidak dapat dibatalkan.`)&&O.delete(route("payroll.destroy",a.id),{preserveScroll:!0})};return(a,e)=>(u(),p(P,null,[l(f(q),{title:"Manajemen Penggajian"}),l(J,null,{breadcrumb:r(()=>[l(Z,{items:G})]),default:r(()=>{var _,F;return[t("div",Q,[t("div",W,[e[6]||(e[6]=t("div",null,[t("h1",{class:"text-2xl font-bold text-text",style:{"font-family":"'Oswald', sans-serif"}}," Manajemen Penggajian "),t("p",{class:"text-muted"}," Kelola periode payroll, proses perhitungan, dan status pembayaran ")],-1)),t("div",X,[l(m,{variant:"secondary",onClick:e[0]||(e[0]=n=>v.value=!v.value)},{default:r(()=>[o(d(v.value?"Tutup Help":"Help"),1)]),_:1}),l(f(c),{href:a.route("payroll.create.page")},{default:r(()=>[l(m,null,{default:r(()=>[...e[5]||(e[5]=[o("Tambah Periode",-1)])]),_:1})]),_:1},8,["href"])])]),(_=g.value)!=null&&_.success?(u(),p("div",Y,d(g.value.success),1)):y("",!0),(F=g.value)!=null&&F.error?(u(),p("div",tt,d(g.value.error),1)):y("",!0),v.value?(u(),H(h,{key:2},{default:r(()=>[...e[7]||(e[7]=[t("div",{class:"p-4 space-y-2 text-sm text-text"},[t("p",{class:"font-semibold"},"Panduan singkat:"),t("ul",{class:"list-disc ml-5 space-y-1 text-muted"},[t("li",null,"Gunakan filter ID Outlet, Status, dan tanggal untuk menyaring periode yang relevan."),t("li",null,[o("Status alur: "),t("strong",null,"active"),o(" → "),t("strong",null,"completed"),o(" (approve) → "),t("strong",null,"paid"),o(" (process payments).")]),t("li",null,'Klik "Tambah Periode" untuk membuat periode baru sekaligus meng-generate payroll.'),t("li",null,'Tombol "Detail" membuka rincian, approve, ekspor CSV, dan proses pembayaran.'),t("li",null,"Periode berstatus paid tidak dapat dihapus.")])],-1)])]),_:1})):y("",!0),l(h,null,{default:r(()=>[t("div",et,[e[15]||(e[15]=t("h2",{class:"text-lg font-semibold text-text"}," Filter Periode ",-1)),t("div",st,[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm text-muted mb-1"},"ID Outlet",-1)),k(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>i.value.outlet_id=n),type:"number",min:"1",placeholder:"Contoh: 1",class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},null,512),[[w,i.value.outlet_id]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm text-muted mb-1"},"Status",-1)),k(t("select",{"onUpdate:modelValue":e[2]||(e[2]=n=>i.value.status=n),class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},[...e[9]||(e[9]=[t("option",{value:""},"Semua",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"paid"},"Paid",-1),t("option",{value:"draft"},"Draft",-1)])],512),[[E,i.value.status]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm text-muted mb-1"},"Tanggal Mulai",-1)),k(t("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>i.value.date_from=n),type:"date",class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},null,512),[[w,i.value.date_from]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm text-muted mb-1"},"Tanggal Akhir",-1)),k(t("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>i.value.date_to=n),type:"date",class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},null,512),[[w,i.value.date_to]])]),t("div",at,[l(m,{class:"flex-1",onClick:T},{default:r(()=>[...e[13]||(e[13]=[o("Terapkan",-1)])]),_:1}),l(m,{variant:"secondary",class:"flex-1",onClick:U},{default:r(()=>[...e[14]||(e[14]=[o("Reset",-1)])]),_:1})])])])]),_:1}),t("div",lt,[l(h,{class:"xl:col-span-2"},{default:r(()=>{var n;return[t("div",rt,[t("div",ot,[t("div",null,[e[16]||(e[16]=t("h2",{class:"text-xl font-bold text-text"}," Daftar Periode Payroll ",-1)),t("p",nt," Menampilkan "+d(((n=b.value.data)==null?void 0:n.length)||0)+" periode terbaru ",1)]),l(f(c),{href:a.route("payroll.statistics"),class:"text-primary text-sm font-medium hover:text-primary-600 transition-colors"},{default:r(()=>[...e[17]||(e[17]=[o(" Statistik Penggajian → ",-1)])]),_:1},8,["href"])]),t("div",dt,[t("table",it,[e[21]||(e[21]=t("thead",null,[t("tr",{class:"text-left text-xs uppercase text-muted bg-surface-1"},[t("th",{class:"px-6 py-3"},"Periode"),t("th",{class:"px-6 py-3"},"Durasi"),t("th",{class:"px-6 py-3"},"Tarif"),t("th",{class:"px-6 py-3"},"Status"),t("th",{class:"px-6 py-3 text-right"}," Aksi ")])],-1)),t("tbody",ut,[(b.value.data||[]).length===0?(u(),p("tr",pt,[...e[18]||(e[18]=[t("td",{colspan:"5",class:"px-6 py-8 text-center text-muted"},[t("div",{class:"flex flex-col items-center"},[t("svg",{class:"w-12 h-12 text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3-1.343-3-3S10.343 2 12 2s3 1.343 3 3 3 3-1.343 3-3-1.657z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 2v6m0 0l-3 3m3-3l3 3m-6 0h6"})]),t("p",{class:"text-lg font-medium"}," Belum ada periode payroll "),t("p",{class:"text-sm mt-1"}," Silakan buat periode payroll terlebih dahulu ")])],-1)])])):y("",!0),(u(!0),p(P,null,N(b.value.data,s=>(u(),p("tr",{key:s.id,class:"hover:bg-surface-2 transition-colors"},[t("td",mt,[t("div",null,[t("p",ft,d(s.name),1),t("p",ct," Mulai "+d(D(s.start_date))+" s/d "+d(D(s.end_date)),1)])]),t("td",xt,[t("span",bt,d(s.duration_days||0)+" hari ",1)]),t("td",yt,[t("div",null,[t("p",gt,d(L(s.basic_rate)),1),t("p",vt," Overtime x"+d(Number(s.overtime_rate||0).toFixed(2)),1)])]),t("td",_t,[t("span",{class:j(["inline-flex items-center px-3 py-1 rounded-full text-xs font-medium",s.status==="completed"?"bg-success-100 text-success-800":s.status==="active"?"bg-primary-100 text-primary-800":s.status==="paid"?"bg-info-100 text-info-800":"bg-gray-100 text-gray-600"])},[t("span",{class:j(["w-2 h-2 rounded-full mr-2",s.status==="completed"?"bg-success-500":s.status==="active"?"bg-primary-500":s.status==="paid"?"bg-info-500":"bg-gray-500"])},null,2),o(" "+d(s.status),1)],2)]),t("td",kt,[l(f(c),{href:a.route("payroll.show",s.id)},{default:r(()=>[l(m,{size:"sm",variant:"secondary"},{default:r(()=>[...e[19]||(e[19]=[o("Detail",-1)])]),_:1})]),_:1},8,["href"]),l(m,{size:"sm",variant:"ghost",onClick:I=>R(s),disabled:s.status==="paid"},{default:r(()=>[...e[20]||(e[20]=[o(" Hapus ",-1)])]),_:1},8,["onClick","disabled"])])]))),128))])])]),b.value.links?(u(),p("div",ht,[(u(!0),p(P,null,N(b.value.links,(s,I)=>(u(),H(f(c),{key:I,href:s.url||"#",class:j(["px-4 py-2 rounded-lg border text-sm font-medium transition-colors",[s.active?"bg-primary text-white border-primary hover:bg-primary-600":"bg-surface-1 text-text border-border hover:bg-surface-2",!s.url&&"opacity-50 cursor-not-allowed"]]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])):y("",!0)])]}),_:1}),t("div",wt,[l(h,{class:"hover:shadow-lg transition-shadow"},{default:r(()=>[t("div",Pt,[e[24]||(e[24]=t("h3",{class:"text-lg font-semibold text-text"},"Aksi Cepat",-1)),e[25]||(e[25]=t("p",{class:"text-sm text-muted"}," Gunakan halaman khusus untuk membuat periode baru atau menjalankan proses payroll secara menyeluruh. ",-1)),t("div",jt,[l(f(c),{href:a.route("payroll.create.page")},{default:r(()=>[l(m,{variant:"secondary",class:"w-full"},{default:r(()=>[...e[22]||(e[22]=[o(" Buat / Generate Payroll ",-1)])]),_:1})]),_:1},8,["href"]),l(f(c),{href:a.route("payroll.statistics")},{default:r(()=>[l(m,{variant:"ghost",class:"w-full"},{default:r(()=>[...e[23]||(e[23]=[o(" Statistik Payroll ",-1)])]),_:1})]),_:1},8,["href"])])])]),_:1})])])])]}),_:1})],64))}};export{Ft as default};

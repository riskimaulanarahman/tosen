import{r as g,m as O,f as I,a as n,b as l,h as a,i as Y,w as d,e,l as _,q as w,d as H,v as C,A as q,o as r,F as p,j as b,t as c,G as S,x as G,k as J,n as Q,p as R}from"./app-CrbtziG4.js";import{A as W}from"./AuthenticatedLayout-CAMF503l.js";import{_ as L}from"./Card.vue_vue_type_script_setup_true_lang-DMPMrx_v.js";import{_ as M}from"./Button.vue_vue_type_script_setup_true_lang-BvtWu8U6.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as Z}from"./Modal-B9fOm8Jk.js";import{_ as ee,a as te}from"./InputLabel-BLhtzuc2.js";const se={class:"space-y-6"},oe={class:"flex items-center justify-between"},re={class:"flex items-center space-x-4"},ne={class:"flex items-center justify-between"},ae={class:"flex items-center space-x-4"},le={class:"relative"},ie=["value"],de={key:0,class:"flex items-center space-x-4"},ue=["value"],ce={key:0},me={key:1},fe={key:0,class:"overflow-x-auto"},pe={class:"min-w-full divide-y divide-border"},xe={class:"bg-surface-2"},he={class:"px-6 py-3 text-left"},ve=["checked"],ke={class:"bg-surface-1 divide-y divide-border"},we={class:"px-6 py-4"},be=["value"],ye={class:"px-6 py-4 whitespace-nowrap"},ge={class:"text-sm font-medium text-text"},_e={class:"px-6 py-4 whitespace-nowrap"},Ce={class:"text-sm text-text-3"},Me={class:"px-6 py-4 whitespace-nowrap"},Ee={class:"text-sm text-text-3"},je={class:"px-6 py-4 whitespace-nowrap"},Te={class:"text-sm text-text-3"},Be={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Oe={class:"flex items-center justify-end space-x-2"},Ae=["onClick"],Se=["onClick"],$e=["onClick"],He={key:1,class:"text-center py-12"},Le={class:"mt-6"},Ke={key:2,class:"mt-6"},Ve=["innerHTML"],ze={class:"w-full max-w-lg rounded-2xl border border-border/60 bg-surface-1 p-6 text-text shadow-xl"},De={class:"mb-4 text-sm text-text-2"},Ue={class:"font-semibold text-text"},Ne={class:"mb-6 text-sm text-text-2"},Pe={class:"font-semibold text-text"},Fe=["value","disabled"],Ie={class:"flex justify-end space-x-3"},Ye={__name:"Index",props:{employees:Object,outlets:Array,errors:Object},setup(v){const E=v,j=g(""),T=g(""),u=g([]),m=O({employee_ids:[],outlet_id:""}),i=O({outlet_id:""}),A=g(!1),f=g(null),K=[{key:"name",label:"Nama"},{key:"email",label:"Email"},{key:"outlet.name",label:"Outlet"},{key:"created_at",label:"Tanggal Dibuat"}],y=()=>E.employees.data.filter(o=>{const t=o.name.toLowerCase().includes(j.value.toLowerCase())||o.email.toLowerCase().includes(j.value.toLowerCase()),s=!T.value||o.outlet_id==T.value;return t&&s}),V=()=>{u.value.length===y().length?u.value=[]:u.value=y().map(o=>o.id)},z=()=>{const o=u.value.length;window.handleConfirm(`Assign <strong>${o} karyawan</strong> ke outlet yang dipilih?`,"Assign ke Outlet?","Ya, Assign!","Batal")&&(m.employee_ids=u.value,m.post(route("employees.bulk-assign"),{onSuccess:()=>{u.value=[],m.reset(),window.handleSuccess(`${o} karyawan berhasil diassign ke outlet`)},onError:s=>{window.handleError(s)}}))},D=o=>{f.value=o,i.outlet_id="",i.clearErrors(),A.value=!0},B=()=>{A.value=!1,f.value=null,i.reset(),i.clearErrors()},U=()=>{if(!f.value)return;if(!i.outlet_id){i.setError("outlet_id","Pilih outlet tujuan terlebih dahulu.");return}const o=f.value.name;i.post(route("employees.transfer",f.value.id),{preserveScroll:!0,onSuccess:()=>{window.handleSuccess(`${o} berhasil dipindahkan ke outlet baru.`),B()},onError:t=>{window.handleError(t)}})},N=o=>{window.handleConfirm(`Apakah Anda yakin ingin menghapus karyawan <strong>${o.name}</strong>?<br><small class="text-text-3">Email: ${o.email}</small>`,"Hapus Karyawan?","Ya, Hapus!","Batal")&&O({}).delete(route("employees.destroy",o.id),{onSuccess:()=>{window.handleSuccess(`Karyawan ${o.name} berhasil dihapus.`)},onError:s=>{window.handleError(s)}})},P=o=>{window.handleConfirm(`Kirim ulang email verifikasi ke:<br><strong>${o.email}</strong><br><small class="text-text-3">Password dan OTP baru akan dibuat</small>`,"Kirim Ulang Email?","Ya, Kirim!","Batal")&&O({}).post(route("employees.resend-email",o.id),{onSuccess:()=>{window.handleSuccess(`Email verifikasi telah dikirim ke ${o.email}`)},onError:s=>{window.handleError(s)}})},F=o=>new Date(o).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"});return I(()=>{E.errors&&Object.keys(E.errors).length>0&&window.handleError(E.errors)}),(o,t)=>(r(),n(p,null,[l(a(Y),{title:"Employee Management"}),l(W,null,{default:d(()=>[e("div",se,[e("div",oe,[t[6]||(t[6]=e("div",null,[e("h1",{class:"text-2xl font-bold text-text",style:{"font-family":"'Oswald', sans-serif"}}," Manajemen Karyawan "),e("p",{class:"text-muted"}," Kelola semua karyawan dari outlet Anda ")],-1)),e("div",re,[l(a(_),{href:o.route("employees.create")},{default:d(()=>[l(M,{variant:"primary"},{default:d(()=>[...t[5]||(t[5]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),w(" Tambah Karyawan ",-1)])]),_:1})]),_:1},8,["href"])])]),l(L,null,{default:d(()=>[e("div",ne,[e("div",ae,[e("div",le,[C(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>j.value=s),type:"text",placeholder:"Cari karyawan...",class:"pl-10 pr-4 py-2 bg-surface-1 border border-border text-text rounded-none focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[q,j.value]]),t[7]||(t[7]=e("svg",{class:"absolute left-3 top-2.5 w-5 h-5 text-text-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 11 14 0z"})],-1))]),C(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>T.value=s),class:"px-3 py-2 bg-surface-1 border border-border text-text rounded-none focus:outline-none focus:ring-2 focus:ring-primary"},[t[8]||(t[8]=e("option",{value:""},"Semua Outlet",-1)),(r(!0),n(p,null,b(v.outlets,s=>(r(),n("option",{key:s.id,value:s.id},c(s.name),9,ie))),128))],512),[[S,T.value]])]),u.value.length>0?(r(),n("div",de,[C(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>a(m).outlet_id=s),class:"px-3 py-2 bg-surface-1 border border-border text-text rounded-none focus:outline-none focus:ring-2 focus:ring-primary"},[t[9]||(t[9]=e("option",{value:""},"Pilih Outlet",-1)),(r(!0),n(p,null,b(v.outlets,s=>(r(),n("option",{key:s.id,value:s.id},c(s.name),9,ue))),128))],512),[[S,a(m).outlet_id]]),l(M,{onClick:z,disabled:a(m).processing||!a(m).outlet_id,variant:"secondary"},{default:d(()=>[a(m).processing?(r(),n("span",ce,"Memproses...")):(r(),n("span",me,"Assign ke Outlet"))]),_:1},8,["disabled"])])):H("",!0)])]),_:1}),l(L,null,{default:d(()=>[y().length>0?(r(),n("div",fe,[e("table",pe,[e("thead",xe,[e("tr",null,[e("th",he,[e("input",{type:"checkbox",onChange:V,checked:u.value.length===y().length,class:"rounded border-border text-primary focus:ring-2 focus:ring-primary"},null,40,ve)]),(r(),n(p,null,b(K,s=>e("th",{key:s.key,class:"px-6 py-3 text-left text-xs font-medium text-text-3 uppercase tracking-wider"},c(s.label),1)),64)),t[10]||(t[10]=e("th",{class:"px-6 py-3 text-right text-xs font-medium text-text-3 uppercase tracking-wider"}," Aksi ",-1))])]),e("tbody",ke,[(r(!0),n(p,null,b(y(),s=>{var x;return r(),n("tr",{key:s.id,class:"hover:bg-surface-2"},[e("td",we,[C(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=h=>u.value=h),value:s.id,class:"rounded border-border text-primary focus:ring-2 focus:ring-primary"},null,8,be),[[G,u.value]])]),e("td",ye,[e("div",ge,c(s.name),1)]),e("td",_e,[e("div",Ce,c(s.email),1)]),e("td",Me,[e("div",Ee,c(((x=s.outlet)==null?void 0:x.name)||"-"),1)]),e("td",je,[e("div",Te,c(F(s.created_at)),1)]),e("td",Be,[e("div",Oe,[l(a(_),{href:o.route("employees.show",s.id),class:"text-primary hover:text-primary/2"},{default:d(()=>[...t[11]||(t[11]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])]),_:1},8,["href"]),e("button",{type:"button",onClick:h=>D(s),class:"text-orange-400 hover:text-orange-300 transition-colors",title:"Transfer Outlet"},[...t[12]||(t[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h10M7 7l3-3m-3 3l3 3M17 17H7m10 0l-3-3m3 3l-3 3"})],-1)])],8,Ae),e("button",{onClick:h=>P(s),class:"text-success hover:text-success/2",title:"Kirim Ulang Email"},[...t[13]||(t[13]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 7.89a3 3 0 1 1 -4.24 0l-7.89-7.89a3 3 0 1 1 4.24 0z"})],-1)])],8,Se),l(a(_),{href:o.route("employees.edit",s.id),class:"text-info hover:text-info/2"},{default:d(()=>[...t[14]||(t[14]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2V7a2 2 0 00-2-2z"})],-1)])]),_:1},8,["href"]),e("button",{onClick:h=>N(s),class:"text-error hover:text-error/2"},[...t[15]||(t[15]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116 21H8a2 2 0 01-1.997-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,$e)])])])}),128))])])])):(r(),n("div",He,[t[17]||(t[17]=e("svg",{class:"mx-auto h-12 w-12 text-text-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2H3a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M7 13H5a2 2 0 00-2 2v10a2 2 0 002 2h5m11 6H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),t[18]||(t[18]=e("h3",{class:"mt-2 text-sm font-medium text-text-3"}," Tidak ada karyawan ",-1)),t[19]||(t[19]=e("p",{class:"mt-1 text-sm text-text-2"}," Mulai dengan menambah karyawan pertama Anda. ",-1)),e("div",Le,[l(a(_),{href:o.route("employees.create")},{default:d(()=>[l(M,{variant:"primary"},{default:d(()=>[...t[16]||(t[16]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),w(" Tambah Karyawan ",-1)])]),_:1})]),_:1},8,["href"])])])),v.employees.links?(r(),n("div",Ke,[(r(!0),n(p,null,b(v.employees.links,(s,x)=>(r(),n(p,{key:x},[s.url?(r(),J(a(_),{key:0,href:s.url,class:Q(["px-3 py-2 text-sm border rounded-none",s.active?"bg-primary text-white border-primary":"bg-surface-2 text-text-3 border-border hover:bg-surface-2 hover:text-text"]),innerHTML:s.label},null,8,["href","class","innerHTML"])):(r(),n("span",{key:1,class:"px-3 py-2 text-sm text-text-3 border border-border rounded-none",innerHTML:s.label},null,8,Ve))],64))),128))])):H("",!0)]),_:1})])]),_:1}),l(Z,{show:A.value,onClose:B},{default:d(()=>{var s,x,h;return[e("div",ze,[e("div",{class:"flex items-center justify-between mb-4"},[t[21]||(t[21]=e("div",null,[e("h2",{class:"text-xl font-bold",style:{"font-family":"'Oswald', sans-serif"}}," Transfer Karyawan "),e("p",{class:"text-sm text-text-3"}," Pindahkan karyawan ke outlet lain tanpa menghapus data. ")],-1)),e("button",{type:"button",onClick:B,class:"text-text-3 hover:text-text"},[...t[20]||(t[20]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",De,[t[22]||(t[22]=w(" Karyawan: ",-1)),e("span",Ue,c(((s=f.value)==null?void 0:s.name)||"-"),1)]),e("div",Ne,[t[23]||(t[23]=w(" Outlet saat ini: ",-1)),e("span",Pe,c(((h=(x=f.value)==null?void 0:x.outlet)==null?void 0:h.name)||"-"),1)]),e("form",{onSubmit:R(U,["prevent"]),class:"space-y-4"},[e("div",null,[l(ee,{for:"transfer-outlet",value:"Outlet Tujuan"}),C(e("select",{id:"transfer-outlet","onUpdate:modelValue":t[4]||(t[4]=k=>a(i).outlet_id=k),class:"mt-1 w-full rounded-none border border-border bg-surface-1 px-3 py-2 text-text focus:outline-none focus:ring-2 focus:ring-primary"},[t[24]||(t[24]=e("option",{value:""},"Pilih Outlet",-1)),(r(!0),n(p,null,b(v.outlets,k=>{var $;return r(),n("option",{key:k.id,value:k.id,disabled:k.id===(($=f.value)==null?void 0:$.outlet_id)},c(k.name),9,Fe)}),128))],512),[[S,a(i).outlet_id]]),l(te,{message:a(i).errors.outlet_id,class:"mt-2"},null,8,["message"])]),e("div",Ie,[l(M,{type:"button",variant:"ghost",onClick:B,disabled:a(i).processing},{default:d(()=>[...t[25]||(t[25]=[w(" Batal ",-1)])]),_:1},8,["disabled"]),l(M,{type:"submit",loading:a(i).processing,disabled:a(i).processing},{default:d(()=>[...t[26]||(t[26]=[w(" Transfer Sekarang ",-1)])]),_:1},8,["loading","disabled"])])],32)])]}),_:1},8,["show"])],64))}},Ze=X(Ye,[["__scopeId","data-v-879a4e9f"]]);export{Ze as default};

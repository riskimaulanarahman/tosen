import{r as $,m as H,c as I,a as d,b as i,h as a,i as P,w as u,e as t,q as g,v as f,o as r,F as x,j as c,t as o,G as T,A as b,d as w,n as A,k as q,l as z,B as E}from"./app-DLRClR93.js";import{A as R}from"./AuthenticatedLayout-X2c9acdw.js";import{_ as k}from"./Card.vue_vue_type_script_setup_true_lang-BPYeHnK8.js";import{_ as h}from"./Button.vue_vue_type_script_setup_true_lang-BEwuWev6.js";import{B as K}from"./Breadcrumb-Da0Mm1hz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"space-y-6"},W={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},X={class:"flex gap-2"},Y={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Z={class:"p-4 space-y-4"},tt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},et=["value"],st={class:"p-4 space-y-3"},lt={class:"space-y-3"},at=["value"],rt={key:0,class:"text-xs text-danger"},dt={class:"p-4 space-y-4"},ot={class:"overflow-x-auto"},it={class:"min-w-full divide-y divide-border text-sm"},nt={class:"divide-y divide-border"},ut={key:0},pt={class:"px-4 py-3"},ft={class:"font-semibold"},mt={class:"text-xs text-muted"},xt={class:"px-4 py-3"},ct={class:"px-4 py-3"},bt={class:"px-4 py-3"},_t={key:0,class:"flex flex-wrap gap-2 pt-2"},St={__name:"Schedule",props:{shiftSchedules:{type:Object,default:()=>({data:[],links:[]})},outlets:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})}},setup(y){var j,B,F,J,M,O;const p=y,L=[{name:"Dashboard",href:route("dashboard")},{name:"Manajemen Shift",href:route("shifts.index")},{name:"Jadwal Shift"}],n=$({outlet_id:((j=p.filters)==null?void 0:j.outlet_id)||"",date_from:((B=p.filters)==null?void 0:B.date_from)||"",date_to:((F=p.filters)==null?void 0:F.date_to)||""}),l=H({outlet_id:((J=p.filters)==null?void 0:J.outlet_id)||"",start_date:((M=p.filters)==null?void 0:M.date_from)||"",end_date:((O=p.filters)==null?void 0:O.date_to)||"",notes:""}),_=I(()=>p.shiftSchedules||{data:[],links:[]}),S=()=>{E.get(route("shifts.schedule"),n.value,{preserveState:!0,preserveScroll:!0})},N=()=>{n.value={outlet_id:"",date_from:"",date_to:""},S()},G=()=>{l.post(route("shifts.generate.schedule"),{preserveScroll:!0,onSuccess:()=>l.reset("notes")})},V=v=>v?new Date(v).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-";return(v,s)=>(r(),d(x,null,[i(a(P),{title:"Jadwal Shift"}),i(R,null,{breadcrumb:u(()=>[i(K,{items:L})]),default:u(()=>[t("div",Q,[t("div",W,[s[9]||(s[9]=t("div",null,[t("h1",{class:"text-3xl font-bold text-text"},"Jadwal Shift"),t("p",{class:"text-muted"}," Buat dan pantau jadwal shift berdasarkan outlet ")],-1)),t("div",X,[i(h,{variant:"secondary",onClick:N},{default:u(()=>[...s[7]||(s[7]=[g(" Reset Filter ",-1)])]),_:1}),i(h,{onClick:S},{default:u(()=>[...s[8]||(s[8]=[g("Terapkan Filter",-1)])]),_:1})])]),t("div",Y,[i(k,{class:"lg:col-span-2"},{default:u(()=>[t("div",Z,[s[14]||(s[14]=t("h2",{class:"text-lg font-semibold text-text"}," Filter Jadwal ",-1)),t("div",tt,[t("div",null,[s[11]||(s[11]=t("label",{class:"block text-sm text-muted mb-1"},"Outlet",-1)),f(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>n.value.outlet_id=e),class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},[s[10]||(s[10]=t("option",{value:""},"Semua Outlet",-1)),(r(!0),d(x,null,c(y.outlets,e=>(r(),d("option",{key:e.id,value:e.id},o(e.name),9,et))),128))],512),[[T,n.value.outlet_id]])]),t("div",null,[s[12]||(s[12]=t("label",{class:"block text-sm text-muted mb-1"},"Mulai",-1)),f(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>n.value.date_from=e),type:"date",class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},null,512),[[b,n.value.date_from]])]),t("div",null,[s[13]||(s[13]=t("label",{class:"block text-sm text-muted mb-1"},"Selesai",-1)),f(t("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>n.value.date_to=e),type:"date",class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},null,512),[[b,n.value.date_to]])])])])]),_:1}),i(k,null,{default:u(()=>[t("div",st,[s[16]||(s[16]=t("h3",{class:"text-lg font-semibold text-text"}," Generate Jadwal Baru ",-1)),t("div",lt,[f(t("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>a(l).outlet_id=e),class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},[s[15]||(s[15]=t("option",{value:""},"Pilih Outlet",-1)),(r(!0),d(x,null,c(y.outlets,e=>(r(),d("option",{key:e.id,value:e.id},o(e.name),9,at))),128))],512),[[T,a(l).outlet_id]]),f(t("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>a(l).start_date=e),type:"date",class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},null,512),[[b,a(l).start_date]]),f(t("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>a(l).end_date=e),type:"date",class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},null,512),[[b,a(l).end_date]]),f(t("textarea",{"onUpdate:modelValue":s[6]||(s[6]=e=>a(l).notes=e),rows:"2",class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg",placeholder:"Catatan tambahan"},null,512),[[b,a(l).notes]]),i(h,{class:"w-full",disabled:a(l).processing,onClick:G},{default:u(()=>[g(o(a(l).processing?"Memproses...":"Generate Jadwal"),1)]),_:1},8,["disabled"]),Object.keys(a(l).errors).length?(r(),d("div",rt,[(r(!0),d(x,null,c(a(l).errors,(e,m)=>(r(),d("div",{key:m},o(e),1))),128))])):w("",!0)])])]),_:1})]),i(k,null,{default:u(()=>[t("div",dt,[s[19]||(s[19]=t("div",{class:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},[t("div",null,[t("h2",{class:"text-lg font-semibold text-text"}," Jadwal Terbaru "),t("p",{class:"text-sm text-muted"}," Menampilkan jadwal berdasarkan filter aktif ")])],-1)),t("div",ot,[t("table",it,[s[18]||(s[18]=t("thead",null,[t("tr",{class:"text-left text-xs uppercase text-muted"},[t("th",{class:"px-4 py-3"},"Shift"),t("th",{class:"px-4 py-3"},"Outlet"),t("th",{class:"px-4 py-3"},"Periode"),t("th",{class:"px-4 py-3"},"Status")])],-1)),t("tbody",nt,[(_.value.data||[]).length===0?(r(),d("tr",ut,[...s[17]||(s[17]=[t("td",{colspan:"4",class:"px-4 py-6 text-center text-muted"}," Jadwal belum tersedia untuk kriteria ini. ",-1)])])):w("",!0),(r(!0),d(x,null,c(_.value.data,e=>{var m,C,D,U;return r(),d("tr",{key:e.id},[t("td",pt,[t("p",ft,o(((m=e.shift)==null?void 0:m.name)||"-"),1),t("p",mt,o((C=e.shift)!=null&&C.start_time?e.shift.start_time.slice(0,5):"-")+" - "+o((D=e.shift)!=null&&D.end_time?e.shift.end_time.slice(0,5):"-"),1)]),t("td",xt,o(((U=e.outlet)==null?void 0:U.name)||`Outlet #${e.outlet_id}`),1),t("td",ct,o(V(e.effective_date))+" - "+o(e.end_date?V(e.end_date):"Berjalan"),1),t("td",bt,[t("span",{class:A(["inline-flex px-2 py-1 rounded-full text-xs",e.is_active?"bg-success-100 text-success-800":"bg-gray-100 text-gray-600"])},o(e.is_active?"Aktif":"Nonaktif"),3)])])}),128))])])]),_.value.links?(r(),d("div",_t,[(r(!0),d(x,null,c(_.value.links,(e,m)=>(r(),q(a(z),{key:m,href:e.url||"#",class:A(["px-3 py-1 rounded border border-border text-sm",[e.active?"bg-primary text-white border-primary":"bg-surface-1 text-text",!e.url&&"opacity-50 pointer-events-none"]]),innerHTML:e.label},null,8,["href","class","innerHTML"]))),128))])):w("",!0)])]),_:1})])]),_:1})],64))}};export{St as default};

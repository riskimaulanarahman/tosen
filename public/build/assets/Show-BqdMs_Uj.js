import{u as z,c as G,m as J,k as W,o as n,w as m,e as t,a as c,d as L,t as a,p as Q,b as o,h as u,q as N,n as T,r as M,f as X,C as Y,i as Z,l as tt,F as O,j as P,E as et}from"./app-DLRClR93.js";import{A as st}from"./AuthenticatedLayout-X2c9acdw.js";import{_ as g}from"./Card.vue_vue_type_script_setup_true_lang-BPYeHnK8.js";import{_ as U}from"./Button.vue_vue_type_script_setup_true_lang-BEwuWev6.js";import{B as ot}from"./Breadcrumb-Da0Mm1hz.js";import{_ as at}from"./Modal-C8rpBJy6.js";import{_ as C}from"./TextInput-C9VEM5N0.js";import{_ as S,a as B}from"./InputLabel-a1EAuQGa.js";import{P as lt}from"./PrimaryButton-Cqp9kkDz.js";import{_ as rt}from"./SecondaryButton-Bj9_OLIF.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as nt}from"./OperationalStatus-BT-czbZs.js";import{L as j}from"./leaflet-src-CoAmz71R.js";/* empty css                */const it={class:"rounded-2xl border border-border/80 bg-surface-1 p-6 text-text shadow-xl"},dt={key:0,class:"mb-4 rounded-lg border border-success/30 bg-success/10 p-3 text-success"},ut={class:"flex items-center justify-end space-x-3 border-t border-border/60 pt-6"},ct={key:0},mt={key:1},xt={__name:"AddEmployeeModal",props:{show:Boolean,outlet:Object},emits:["close"],setup(l,{emit:x}){const y=l,v=x,_=z(),h=G(()=>{var w;return(w=_.props.flash)==null?void 0:w.success}),r=J({name:"",email:"",password:"",password_confirmation:""}),V=()=>{r.post(route("outlets.employees.store",y.outlet.id),{onSuccess:()=>{r.reset(),v("close")},preserveScroll:!0})},b=()=>{r.reset(),v("close")};return(w,i)=>(n(),W(at,{show:l.show,onClose:b},{default:m(()=>[t("div",it,[t("div",{class:"mb-6 flex items-center justify-between border-b border-border/60 pb-4"},[i[5]||(i[5]=t("h2",{class:"text-xl font-bold text-text",style:{"font-family":"'Oswald', sans-serif"}}," Tambah Karyawan Baru ",-1)),t("button",{onClick:b,class:"text-text-2 transition duration-fast hover:text-text"},[...i[4]||(i[4]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),h.value?(n(),c("div",dt,a(h.value),1)):L("",!0),t("form",{onSubmit:Q(V,["prevent"]),class:"space-y-4"},[t("div",null,[o(S,{for:"name",value:"Nama Lengkap"}),o(C,{id:"name",type:"text",class:"mt-1",modelValue:u(r).name,"onUpdate:modelValue":i[0]||(i[0]=f=>u(r).name=f),required:"",autofocus:"",placeholder:"Masukkan nama karyawan"},null,8,["modelValue"]),o(B,{message:u(r).errors.name,class:"mt-2"},null,8,["message"])]),t("div",null,[o(S,{for:"email",value:"Email"}),o(C,{id:"email",type:"email",class:"mt-1",modelValue:u(r).email,"onUpdate:modelValue":i[1]||(i[1]=f=>u(r).email=f),required:"",placeholder:"karyawan@contoh.com"},null,8,["modelValue"]),o(B,{message:u(r).errors.email,class:"mt-2"},null,8,["message"])]),t("div",null,[o(S,{for:"password",value:"Password Sementara"}),o(C,{id:"password",type:"password",class:"mt-1",modelValue:u(r).password,"onUpdate:modelValue":i[2]||(i[2]=f=>u(r).password=f),required:"",placeholder:"Password sementara untuk karyawan"},null,8,["modelValue"]),o(B,{message:u(r).errors.password,class:"mt-2"},null,8,["message"]),i[6]||(i[6]=t("p",{class:"mt-1 text-sm text-text-2"}," Karyawan akan mengubah password ini setelah login pertama kali ",-1))]),t("div",null,[o(S,{for:"password_confirmation",value:"Konfirmasi Password"}),o(C,{id:"password_confirmation",type:"password",class:"mt-1",modelValue:u(r).password_confirmation,"onUpdate:modelValue":i[3]||(i[3]=f=>u(r).password_confirmation=f),required:"",placeholder:"Konfirmasi password"},null,8,["modelValue"]),o(B,{message:u(r).errors.password_confirmation,class:"mt-2"},null,8,["message"])]),t("div",ut,[o(rt,{onClick:b,disabled:u(r).processing},{default:m(()=>[...i[7]||(i[7]=[N(" Batal ",-1)])]),_:1},8,["disabled"]),o(lt,{class:T({"opacity-60":u(r).processing}),disabled:u(r).processing},{default:m(()=>[u(r).processing?(n(),c("span",ct,"Menyimpan...")):(n(),c("span",mt,"Tambah Karyawan"))]),_:1},8,["class","disabled"])])],32)])]),_:1},8,["show"]))}},ft=H(xt,[["__scopeId","data-v-0b6111fc"]]),pt={class:"space-y-6"},ht={class:"flex items-center justify-between"},bt={class:"text-2xl font-bold text-text",style:{"font-family":"'Oswald', sans-serif"}},vt={key:0,class:"bg-success-100 border border-success rounded-lg p-4"},wt={class:"flex"},gt={class:"text-success"},yt={key:1,class:"bg-error-100 border border-error rounded-lg p-4"},_t={class:"flex"},kt={class:"text-error"},Mt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Ct={class:"lg:col-span-1 space-y-6"},St={class:"space-y-4"},Bt={class:"text-text font-medium"},jt={class:"text-text-2 text-sm"},Vt={class:"text-text-2 text-sm"},Dt={class:"text-text font-medium"},$t={key:0,class:"h-64 rounded-lg overflow-hidden border border-border"},Ot={key:1,class:"text-sm text-muted text-center border border-dashed border-border rounded-lg p-6"},Lt={class:"flex items-center justify-between mb-4"},Nt={key:0},Tt={class:"space-y-3"},At={class:"flex items-center"},It={class:"w-8 h-8 bg-surface-3 rounded-none flex items-center justify-center text-xs text-text-2 font-medium"},Kt={class:"ml-3"},Et={class:"text-text font-medium"},Pt={class:"text-muted text-sm"},Ut={class:"text-right"},zt={key:1,class:"text-center py-8 text-muted"},Ht={class:"lg:col-span-2"},Rt={key:0},qt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Ft={class:"bg-surface-2 border border-border rounded-none p-4"},Gt={class:"text-2xl font-bold text-text"},Jt={class:"bg-surface-2 border border-border rounded-none p-4"},Wt={class:"text-2xl font-bold text-text"},Qt={class:"bg-surface-2 border border-border rounded-none p-4"},Xt={class:"text-2xl font-bold text-text"},Yt={class:"overflow-x-auto"},Zt={class:"min-w-full divide-y divide-border"},te={class:"bg-surface-1 divide-y divide-border"},ee={class:"px-6 py-4"},se={class:"flex items-center"},oe={class:"w-8 h-8 bg-surface-3 rounded-none flex items-center justify-center text-xs text-text-2 font-medium"},ae={class:"ml-3"},le={class:"text-text font-medium"},re={class:"text-muted text-sm"},ne={class:"px-6 py-4 whitespace-nowrap text-sm text-text-2"},ie={class:"px-6 py-4 whitespace-nowrap text-sm text-success"},de={class:"px-6 py-4 whitespace-nowrap text-sm"},ue={key:0,class:"text-primary"},ce={key:1,class:"text-muted"},me={class:"px-6 py-4 whitespace-nowrap text-sm text-text-2"},xe={class:"px-6 py-4 whitespace-nowrap text-sm text-text-2"},fe={class:"px-6 py-4 whitespace-nowrap text-sm"},pe={key:1,class:"text-center py-12 text-muted"},he={__name:"Show",props:{outlet:Object},setup(l){var I,K;const x=l,y=z(),v=M((I=y.props.flash)==null?void 0:I.success),_=M((K=y.props.flash)==null?void 0:K.error),h=M(!1),r=()=>{h.value=!0},V=()=>{h.value=!1},b=d=>new Date(d).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),w=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),i=(d,e)=>{if(!d||!e)return"-";const s=new Date(d),E=new Date(e)-s,q=Math.floor(E/(1e3*60*60)),F=Math.floor(E%(1e3*60*60)/(1e3*60));return`${q}j ${F}m`},f=d=>d==="checked_in"?{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success border border-success",text:"Sedang Check-In"}:{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-surface-3 text-text-2 border border-border",text:"Selesai"},R=[{name:"Dashboard",href:route("dashboard")},{name:"Manajemen Outlet",href:route("outlets.index")},{name:x.outlet.name}],D=M(null);let p=null,$=null,k=null;const A=()=>{if(!D.value)return;const d=parseFloat(x.outlet.latitude),e=parseFloat(x.outlet.longitude);Number.isNaN(d)||Number.isNaN(e)||(p?p.setView([d,e],15):(p=j.map(D.value,{zoomControl:!0}).setView([d,e],15),j.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(p)),$?$.setLatLng([d,e]):$=j.marker([d,e]).addTo(p),k?(k.setLatLng([d,e]),k.setRadius(x.outlet.radius||0)):x.outlet.radius&&(k=j.circle([d,e],{radius:x.outlet.radius,color:"#2563eb",fillColor:"#3b82f6",fillOpacity:.15}).addTo(p)),p&&et(()=>{p.invalidateSize()}))};return X(()=>{A()}),Y(()=>[x.outlet.latitude,x.outlet.longitude,x.outlet.radius],()=>{A()}),(d,e)=>(n(),c(O,null,[o(u(Z),{title:`${l.outlet.name} - Detail`},null,8,["title"]),o(st,null,{breadcrumb:m(()=>[o(ot,{items:R})]),default:m(()=>[t("div",pt,[t("div",ht,[t("div",null,[t("h1",bt,a(l.outlet.name),1),e[0]||(e[0]=t("p",{class:"text-muted"}," Detail informasi dan aktivitas outlet ",-1))]),o(u(tt),{href:d.route("outlets.index")},{default:m(()=>[o(U,{variant:"secondary"},{default:m(()=>[...e[1]||(e[1]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),N(" Kembali ke Daftar ",-1)])]),_:1})]),_:1},8,["href"])]),v.value?(n(),c("div",vt,[t("div",wt,[e[2]||(e[2]=t("svg",{class:"w-5 h-5 text-success mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("div",gt,a(v.value),1)])])):L("",!0),_.value?(n(),c("div",yt,[t("div",_t,[e[3]||(e[3]=t("svg",{class:"w-5 h-5 text-error mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("div",kt,a(_.value),1)])])):L("",!0),t("div",Mt,[t("div",Ct,[o(g,null,{default:m(()=>[e[8]||(e[8]=t("h2",{class:"text-xl font-semibold text-text mb-4",style:{"font-family":"'Oswald', sans-serif"}}," Detail Outlet ",-1)),t("div",St,[t("div",null,[e[4]||(e[4]=t("div",{class:"text-sm text-muted"},"Nama",-1)),t("div",Bt,a(l.outlet.name),1)]),t("div",null,[e[5]||(e[5]=t("div",{class:"text-sm text-muted"},"Alamat",-1)),t("div",jt,a(l.outlet.address),1)]),t("div",null,[e[6]||(e[6]=t("div",{class:"text-sm text-muted"},"Koordinat",-1)),t("div",Vt,a(l.outlet.latitude)+", "+a(l.outlet.longitude),1)]),t("div",null,[e[7]||(e[7]=t("div",{class:"text-sm text-muted"}," Radius Geofence ",-1)),t("div",Dt,a(l.outlet.radius)+" meter ",1)])])]),_:1}),o(g,null,{default:m(()=>[e[9]||(e[9]=t("h2",{class:"text-xl font-semibold text-text mb-4",style:{"font-family":"'Oswald', sans-serif"}}," Lokasi di Peta ",-1)),l.outlet.latitude&&l.outlet.longitude?(n(),c("div",$t,[t("div",{ref_key:"mapRef",ref:D,class:"w-full h-full",style:{"min-height":"16rem"}},null,512)])):(n(),c("div",Ot," Lokasi belum tersedia untuk outlet ini. "))]),_:1}),o(g,null,{default:m(()=>[e[10]||(e[10]=t("h2",{class:"text-xl font-semibold text-text mb-4",style:{"font-family":"'Oswald', sans-serif"}}," Status Operasional ",-1)),o(nt,{outlet:l.outlet,"show-details":!0},null,8,["outlet"])]),_:1}),o(g,null,{default:m(()=>[t("div",Lt,[e[12]||(e[12]=t("h2",{class:"text-xl font-semibold text-text",style:{"font-family":"'Oswald', sans-serif"}}," Karyawan ",-1)),o(U,{onClick:r,variant:"primary",size:"sm"},{default:m(()=>[...e[11]||(e[11]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),N(" Tambah ",-1)])]),_:1})]),l.outlet.employees&&l.outlet.employees.length>0?(n(),c("div",Nt,[t("div",Tt,[(n(!0),c(O,null,P(l.outlet.employees,s=>(n(),c("div",{key:s.id,class:"flex items-center justify-between p-3 bg-surface-2 rounded-none"},[t("div",At,[t("div",It,a(s.name.charAt(0).toUpperCase()),1),t("div",Kt,[t("div",Et,a(s.name),1),t("div",Pt,a(s.email),1)])]),t("div",Ut,[t("span",{class:T(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.email_verified_at?"bg-success-100 text-success border border-success":"bg-warning-100 text-warning border border-warning"])},a(s.email_verified_at?"Terverifikasi":"Pending"),3)])]))),128))])])):(n(),c("div",zt,[...e[13]||(e[13]=[t("svg",{class:"mx-auto h-12 w-12 text-text-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 100-5.646 5.646m5.646 10.354H12a4 4 0 100-5.646-5.646M17.646 12a4 4 0 100-5.646 5.646m-5.646 10.354H12a4 4 0 1005.646-5.646m-1.646-12.354H12a4 4 0 100-5.646-5.646"})],-1),t("p",{class:"mt-2"},"Belum ada karyawan.",-1)])]))]),_:1})]),t("div",Ht,[o(g,null,{default:m(()=>[e[19]||(e[19]=t("h2",{class:"text-xl font-semibold text-text mb-6",style:{"font-family":"'Oswald', sans-serif"}}," Riwayat Absensi ",-1)),l.outlet.attendances&&l.outlet.attendances.length>0?(n(),c("div",Rt,[t("div",qt,[t("div",Ft,[e[14]||(e[14]=t("div",{class:"text-sm text-muted"}," Total Record ",-1)),t("div",Gt,a(l.outlet.attendances.length),1)]),t("div",Jt,[e[15]||(e[15]=t("div",{class:"text-sm text-muted"}," Check-in Hari Ini ",-1)),t("div",Wt,a(l.outlet.attendances.filter(s=>new Date(s.created_at).toDateString()===new Date().toDateString()).length),1)]),t("div",Qt,[e[16]||(e[16]=t("div",{class:"text-sm text-muted"}," Aktif Sekarang ",-1)),t("div",Xt,a(l.outlet.attendances.filter(s=>s.status==="checked_in").length),1)])]),t("div",Yt,[t("table",Zt,[e[17]||(e[17]=t("thead",{class:"bg-surface-2"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-text-2 uppercase tracking-wider"}," Karyawan "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-text-2 uppercase tracking-wider"}," Tanggal "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-text-2 uppercase tracking-wider"}," Check In "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-text-2 uppercase tracking-wider"}," Check Out "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-text-2 uppercase tracking-wider"}," Durasi "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-text-2 uppercase tracking-wider"}," Jarak "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-text-2 uppercase tracking-wider"}," Status ")])],-1)),t("tbody",te,[(n(!0),c(O,null,P(l.outlet.attendances,s=>(n(),c("tr",{key:s.id,class:"hover:bg-surface-2"},[t("td",ee,[t("div",se,[t("div",oe,a(s.user.name.charAt(0).toUpperCase()),1),t("div",ae,[t("div",le,a(s.user.name),1),t("div",re,a(s.user.email),1)])])]),t("td",ne,a(w(s.created_at)),1),t("td",ie,a(b(s.checkin_time)),1),t("td",de,[s.checkout_time?(n(),c("span",ue,a(b(s.checkout_time)),1)):(n(),c("span",ce,"-"))]),t("td",me,a(i(s.checkin_time,s.checkout_time)),1),t("td",xe,a(s.checkin_distance?Math.round(s.checkin_distance)+"m":"-"),1),t("td",fe,[t("span",{class:T(f(s.status).class)},a(f(s.status).text),3)])]))),128))])])])])):(n(),c("div",pe,[...e[18]||(e[18]=[t("svg",{class:"mx-auto h-12 w-12 text-text-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})],-1),t("p",{class:"mt-2"},"Belum ada riwayat absensi.",-1)])]))]),_:1})])])]),o(ft,{show:h.value,outlet:l.outlet,onClose:V},null,8,["show","outlet"])]),_:1})],64))}},Oe=H(he,[["__scopeId","data-v-9e231b85"]]);export{Oe as default};

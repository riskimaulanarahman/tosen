import{u as q,c as V,r as P,a as u,b as o,h as z,i as D,w as d,e as t,d as A,q as v,o as c,t as l,v as g,A as _,F as B,j as E,I as j,B as H}from"./app-CKTrW43v.js";import{A as U}from"./AuthenticatedLayout-CDs14gSP.js";import{_ as p}from"./Card.vue_vue_type_script_setup_true_lang-CwzmMHeM.js";import{_ as h}from"./Button.vue_vue_type_script_setup_true_lang-DINjassF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"space-y-6"},$={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},I={key:0,class:"bg-danger-900/20 border border-danger-700 text-danger-100 p-4 rounded-lg"},K={class:"p-4 space-y-4"},L={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},R={class:"flex items-end gap-2"},G={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},J={class:"p-6"},Q={class:"flex items-center"},W={class:"text-3xl font-bold text-text"},X={class:"p-6"},Y={class:"flex items-center"},Z={class:"text-3xl font-bold text-info"},tt={class:"p-6"},st={class:"flex items-center"},et={class:"text-3xl font-bold text-success"},lt={class:"p-6 space-y-4"},at={class:"flex items-center justify-between"},ot={class:"text-sm text-muted"},it={class:"overflow-x-auto"},dt={class:"min-w-full divide-y divide-border text-sm"},nt={class:"bg-surface-1 divide-y divide-border"},rt={key:0},ut={class:"px-6 py-4"},ct={class:"flex items-center"},pt={class:"font-semibold text-text"},xt={class:"text-xs text-muted"},mt={class:"px-6 py-4"},ft={class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-primary-100 text-primary-800"},vt={class:"px-6 py-4"},gt={class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-info-100 text-info-800"},_t={class:"px-6 py-4"},ht={class:"font-medium text-text"},bt={class:"px-6 py-4"},yt={class:"flex items-center gap-2"},kt={class:"w-full bg-surface-2 rounded-full h-2"},wt={class:"text-xs text-text font-semibold"},At={__name:"Statistics",props:{statistics:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})}},setup(x){var y,k,w;const i=x,N=q(),b=V(()=>N.props.flash||{}),a=P({outlet_id:((y=i.filters)==null?void 0:y.outlet_id)||"",start_date:((k=i.filters)==null?void 0:k.start_date)||"",end_date:((w=i.filters)==null?void 0:w.end_date)||""}),m=V(()=>{if(!i.statistics||i.statistics.length===0)return{totalAssignments:0,uniqueEmployees:0,avgCoverage:0};const C=i.statistics.reduce((e,n)=>e+(n.total_assignments||0),0),s=i.statistics.reduce((e,n)=>e+(n.unique_employees||0),0),r=i.statistics.reduce((e,n)=>e+(n.coverage_percentage||0),0)/i.statistics.length;return{totalAssignments:C,uniqueEmployees:s,avgCoverage:Number.isFinite(r)?r:0}}),f=()=>{H.get(route("shifts.statistics"),a.value,{preserveScroll:!0,preserveState:!0})},T=()=>{a.value={outlet_id:"",start_date:"",end_date:""},f()};return(C,s)=>(c(),u(B,null,[o(z(D),{title:"Statistik Shift"}),o(U,null,{default:d(()=>{var r;return[t("div",O,[t("div",$,[s[4]||(s[4]=t("div",null,[t("h1",{class:"text-2xl font-bold text-text",style:{"font-family":"'Oswald', sans-serif"}}," Statistik Shift "),t("p",{class:"text-muted"}," Analisis performa shift berdasarkan outlet dan periode ")],-1)),o(h,{onClick:f},{default:d(()=>[...s[3]||(s[3]=[v("Perbarui Statistik",-1)])]),_:1})]),(r=b.value)!=null&&r.error?(c(),u("div",I,l(b.value.error),1)):A("",!0),o(p,null,{default:d(()=>[t("div",K,[s[10]||(s[10]=t("h2",{class:"text-lg font-semibold text-text"},"Filter Data",-1)),t("div",L,[t("div",null,[s[5]||(s[5]=t("label",{class:"block text-sm mb-1 text-muted"},"ID Outlet",-1)),g(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>a.value.outlet_id=e),type:"number",min:"1",class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg",placeholder:"Contoh: 1"},null,512),[[_,a.value.outlet_id]])]),t("div",null,[s[6]||(s[6]=t("label",{class:"block text-sm mb-1 text-muted"},"Tanggal Mulai",-1)),g(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>a.value.start_date=e),type:"date",class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},null,512),[[_,a.value.start_date]])]),t("div",null,[s[7]||(s[7]=t("label",{class:"block text-sm mb-1 text-muted"},"Tanggal Akhir",-1)),g(t("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>a.value.end_date=e),type:"date",class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},null,512),[[_,a.value.end_date]])]),t("div",R,[o(h,{class:"flex-1",onClick:f},{default:d(()=>[...s[8]||(s[8]=[v("Terapkan",-1)])]),_:1}),o(h,{variant:"secondary",class:"flex-1",onClick:T},{default:d(()=>[...s[9]||(s[9]=[v("Reset",-1)])]),_:1})])])])]),_:1}),t("div",G,[o(p,{class:"hover:shadow-lg transition-shadow"},{default:d(()=>[t("div",J,[t("div",Q,[s[12]||(s[12]=t("div",{class:"flex-shrink-0 bg-primary-100 rounded-lg p-3 mr-4"},[t("svg",{class:"w-6 h-6 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 001-1v-1m3-2V8a2 2 0 00-2 2v6a2 2 0 002 2zm6-4V7a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})])],-1)),t("div",null,[s[11]||(s[11]=t("p",{class:"text-sm text-muted"}," Total Penugasan ",-1)),t("p",W,l(m.value.totalAssignments),1)])])])]),_:1}),o(p,{class:"hover:shadow-lg transition-shadow"},{default:d(()=>[t("div",X,[t("div",Y,[s[14]||(s[14]=t("div",{class:"flex-shrink-0 bg-info-100 rounded-lg p-3 mr-4"},[t("svg",{class:"w-6 h-6 text-info",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 016-6h2a6 6 0 016 6v1zm0 0h6v2a2 2 0 002 2h-8a2 2 0 01-2-2v-2h8a2 2 0 012 2v2z"})])],-1)),t("div",null,[s[13]||(s[13]=t("p",{class:"text-sm text-muted"},"Karyawan Unik",-1)),t("p",Z,l(m.value.uniqueEmployees),1)])])])]),_:1}),o(p,{class:"hover:shadow-lg transition-shadow"},{default:d(()=>[t("div",tt,[t("div",st,[s[16]||(s[16]=t("div",{class:"flex-shrink-0 bg-success-100 rounded-lg p-3 mr-4"},[t("svg",{class:"w-6 h-6 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})])],-1)),t("div",null,[s[15]||(s[15]=t("p",{class:"text-sm text-muted"}," Rata-rata Coverage ",-1)),t("p",et,l(m.value.avgCoverage.toFixed(1))+"% ",1)])])])]),_:1})]),o(p,null,{default:d(()=>[t("div",lt,[t("div",at,[s[17]||(s[17]=t("h2",{class:"text-xl font-bold text-text"}," Detail Statistik Per Shift ",-1)),t("p",ot," Periode: "+l(a.value.start_date||"-")+" s/d "+l(a.value.end_date||"-"),1)]),t("div",it,[t("table",dt,[s[19]||(s[19]=t("thead",null,[t("tr",{class:"text-left text-xs uppercase text-muted bg-surface-1"},[t("th",{class:"px-6 py-3"},"Shift"),t("th",{class:"px-6 py-3"},"Penugasan"),t("th",{class:"px-6 py-3"},"Karyawan"),t("th",{class:"px-6 py-3"}," Assignment / Minggu "),t("th",{class:"px-6 py-3"},"Coverage")])],-1)),t("tbody",nt,[(x.statistics||[]).length===0?(c(),u("tr",rt,[...s[18]||(s[18]=[t("td",{colspan:"5",class:"px-6 py-8 text-center text-muted"},[t("div",{class:"flex flex-col items-center"},[t("svg",{class:"w-12 h-12 text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002 2v6a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2v6z"})]),t("p",{class:"text-lg font-medium"}," Belum ada data statistik "),t("p",{class:"text-sm mt-1"}," Silakan pilih filter yang berbeda ")])],-1)])])):A("",!0),(c(!0),u(B,null,E(x.statistics,e=>{var n,S,F,M;return c(),u("tr",{key:((n=e.shift)==null?void 0:n.id)||e.id,class:"hover:bg-surface-2 transition-colors"},[t("td",ut,[t("div",ct,[t("div",{class:"w-2 h-2 rounded-full mr-3",style:j({backgroundColor:((S=e.shift)==null?void 0:S.color_code)||"#3B82F6"})},null,4),t("div",null,[t("p",pt,l(((F=e.shift)==null?void 0:F.name)||"Shift"),1),t("p",xt,l(((M=e.shift)==null?void 0:M.description)||"Tidak ada deskripsi"),1)])])]),t("td",mt,[t("span",ft,l(e.total_assignments),1)]),t("td",vt,[t("span",gt,l(e.unique_employees),1)]),t("td",_t,[t("span",ht,l(Number(e.avg_assignments_per_week||0).toFixed(1)),1)]),t("td",bt,[t("div",yt,[t("div",kt,[t("div",{class:"bg-success h-2 rounded-full",style:j({width:`${Math.min(e.coverage_percentage||0,100)}%`})},null,4)]),t("span",wt,l(Number(e.coverage_percentage||0).toFixed(1))+"% ",1)])])])}),128))])])])])]),_:1})])]}),_:1})],64))}};export{At as default};

import{r as M,a as o,b as a,h as C,i as B,w as i,e,q as f,v,o as l,F as x,j as k,t as r,G as D,A as S,d as b,k as _,n as j,l as V,B as T}from"./app-BKAzIGDl.js";import{A as z}from"./AuthenticatedLayout-CvTf77Xc.js";import{_ as u}from"./Card.vue_vue_type_script_setup_true_lang-B__DTBrn.js";import{_ as m}from"./Button.vue_vue_type_script_setup_true_lang-D44kyhuY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"space-y-6"},A={class:"flex flex-wrap items-center justify-between gap-4"},H={class:"flex items-center space-x-3"},N={class:"grid md:grid-cols-4 gap-4"},K=["value"],$={class:"md:col-span-2"},R={class:"mt-4 flex flex-wrap gap-3"},U={class:"grid md:grid-cols-4 gap-4"},E={class:"text-2xl font-semibold text-text"},I={class:"text-2xl font-semibold text-text"},q={class:"text-2xl font-semibold text-text"},G={class:"text-2xl font-semibold text-text"},J={class:"grid gap-4 md:grid-cols-2 xl:grid-cols-3"},P={class:"flex items-start justify-between mb-4"},Q={class:"text-lg font-semibold text-text"},W={class:"text-sm text-text-3"},X={class:"text-xs text-muted"},Y={class:"space-y-2 text-sm text-text-3 mb-4"},Z={class:"flex justify-between"},ee={class:"text-text"},te={class:"flex justify-between"},se={class:"text-text"},le={class:"grid grid-cols-1 gap-4"},oe={class:"bg-surface-2 rounded-lg p-3 space-y-2"},ie={class:"flex items-center justify-between"},re={class:"text-xs text-text-3"},ae={key:0,class:"rounded-lg overflow-hidden border border-border"},de=["src"],ne={key:1,class:"text-sm text-text-3 text-center py-6"},ue={class:"flex justify-end"},ce={class:"bg-surface-2 rounded-lg p-3 space-y-2"},xe={class:"flex items-center justify-between"},fe={class:"text-xs text-text-3"},me={key:0,class:"rounded-lg overflow-hidden border border-border"},_e=["src"],pe={key:1,class:"text-sm text-text-3 text-center py-6"},he={class:"flex justify-end"},ve={key:0,class:"mt-6"},ke=["innerHTML"],be={key:1,class:"py-16 text-center"},je={__name:"SelfieFeed",props:{attendances:Object,outlets:Array,stats:Object,filters:Object},setup(d){const p=d,n=M({outlet_id:p.filters.outlet_id||"",date:p.filters.date||"",search:p.filters.search||""}),g=()=>{T.get(route("reports.selfies"),{...n.value},{preserveState:!0,preserveScroll:!0})},L=()=>{n.value={outlet_id:"",date:"",search:""},g()},F=()=>{T.get(route("reports.index"),{...n.value},{preserveState:!0,preserveScroll:!0})},y=c=>c?new Date(c).toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",w=c=>{if(!c)return;const t=document.createElement("a");t.href=c,t.target="_blank",t.rel="noopener",document.body.appendChild(t),t.click(),document.body.removeChild(t)};return(c,t)=>(l(),o(x,null,[a(C(B),{title:"Selfie Karyawan"}),a(z,null,{default:i(()=>[e("div",O,[e("div",A,[t[4]||(t[4]=e("div",null,[e("h1",{class:"text-2xl font-bold text-text",style:{"font-family":"'Oswald', sans-serif"}}," Review Selfie Karyawan "),e("p",{class:"text-muted"}," Mode sederhana untuk memeriksa foto check-in dan check-out ")],-1)),e("div",H,[a(m,{onClick:F,variant:"secondary"},{default:i(()=>[...t[3]||(t[3]=[f(" Kembali ke Laporan Lengkap ",-1)])]),_:1})])]),a(u,null,{default:i(()=>[e("div",N,[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm text-text-3 mb-2"},"Outlet",-1)),v(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.value.outlet_id=s),class:"w-full rounded-lg border border-border bg-surface-2 text-text focus:ring-primary"},[t[5]||(t[5]=e("option",{value:""},"Semua Outlet",-1)),(l(!0),o(x,null,k(d.outlets,s=>(l(),o("option",{key:s.id,value:s.id},r(s.name),9,K))),128))],512),[[D,n.value.outlet_id]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm text-text-3 mb-2"},"Tanggal",-1)),v(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=s=>n.value.date=s),class:"w-full rounded-lg border border-border bg-surface-2 text-text focus:ring-primary"},null,512),[[S,n.value.date]])]),e("div",$,[t[8]||(t[8]=e("label",{class:"block text-sm text-text-3 mb-2"},"Cari Karyawan",-1)),v(e("input",{type:"text",placeholder:"Nama atau email","onUpdate:modelValue":t[2]||(t[2]=s=>n.value.search=s),class:"w-full rounded-lg border border-border bg-surface-2 text-text focus:ring-primary"},null,512),[[S,n.value.search]])])]),e("div",R,[a(m,{variant:"primary",onClick:g},{default:i(()=>[...t[9]||(t[9]=[f(" Terapkan Filter ",-1)])]),_:1}),a(m,{variant:"ghost",onClick:L},{default:i(()=>[...t[10]||(t[10]=[f(" Reset ",-1)])]),_:1})])]),_:1}),e("div",U,[a(u,{variant:"gradient",hover:""},{default:i(()=>[t[11]||(t[11]=e("p",{class:"text-sm text-text-3"},"Total Catatan",-1)),e("p",E,r(d.stats.total_records),1)]),_:1}),a(u,{variant:"gradient",hover:""},{default:i(()=>[t[12]||(t[12]=e("p",{class:"text-sm text-text-3"},"Dengan Selfie Check-in",-1)),e("p",I,r(d.stats.with_check_in_selfie),1)]),_:1}),a(u,{variant:"gradient",hover:""},{default:i(()=>[t[13]||(t[13]=e("p",{class:"text-sm text-text-3"},"Dengan Selfie Check-out",-1)),e("p",q,r(d.stats.with_check_out_selfie),1)]),_:1}),a(u,{variant:"gradient",hover:""},{default:i(()=>[t[14]||(t[14]=e("p",{class:"text-sm text-text-3"},"Lengkap (Check-in & out)",-1)),e("p",G,r(d.stats.with_both),1)]),_:1})]),a(u,null,{default:i(()=>[d.attendances.data.length?(l(),o(x,{key:0},[e("div",J,[(l(!0),o(x,null,k(d.attendances.data,s=>(l(),_(u,{key:s.id,variant:"bordered",hover:""},{default:i(()=>[e("div",P,[e("div",null,[e("h3",Q,r(s.user.name),1),e("p",W,r(s.user.email),1),e("p",X,r(s.user.outlet||"Tidak ada outlet"),1)]),e("span",{class:j(["px-3 py-1 rounded-full text-xs font-semibold",[s.selfie_deletion_status.color==="danger"?"bg-error-100 text-error-600":"bg-success-100 text-success-700"]])},r(s.selfie_deletion_status.text),3)]),e("div",Y,[e("div",Z,[t[15]||(t[15]=e("span",null,"Check-in",-1)),e("span",ee,r(y(s.check_in_time)),1)]),e("div",te,[t[16]||(t[16]=e("span",null,"Check-out",-1)),e("span",se,r(y(s.check_out_time)),1)])]),e("div",le,[e("div",oe,[e("div",ie,[t[17]||(t[17]=e("span",{class:"text-sm font-medium text-text"},"Selfie Check-in",-1)),e("span",re,r(s.check_in_file_size_formatted),1)]),s.check_in_selfie_url?(l(),o("div",ae,[e("img",{src:s.check_in_thumbnail_url||s.check_in_selfie_url,class:"w-full h-48 object-cover",alt:"Check-in selfie"},null,8,de)])):(l(),o("p",ne," Tidak ada selfie check-in ")),e("div",ue,[s.check_in_selfie_url?(l(),_(m,{key:0,variant:"secondary",size:"sm",onClick:h=>w(s.check_in_selfie_url)},{default:i(()=>[...t[18]||(t[18]=[f(" Lihat Foto ",-1)])]),_:1},8,["onClick"])):b("",!0)])]),e("div",ce,[e("div",xe,[t[19]||(t[19]=e("span",{class:"text-sm font-medium text-text"},"Selfie Check-out",-1)),e("span",fe,r(s.check_out_file_size_formatted),1)]),s.check_out_selfie_url?(l(),o("div",me,[e("img",{src:s.check_out_thumbnail_url||s.check_out_selfie_url,class:"w-full h-48 object-cover",alt:"Check-out selfie"},null,8,_e)])):(l(),o("p",pe," Tidak ada selfie check-out ")),e("div",he,[s.check_out_selfie_url?(l(),_(m,{key:0,variant:"secondary",size:"sm",onClick:h=>w(s.check_out_selfie_url)},{default:i(()=>[...t[20]||(t[20]=[f(" Lihat Foto ",-1)])]),_:1},8,["onClick"])):b("",!0)])])])]),_:2},1024))),128))]),d.attendances.links?(l(),o("div",ve,[(l(!0),o(x,null,k(d.attendances.links,(s,h)=>(l(),o(x,{key:h},[s.url?(l(),_(C(V),{key:0,href:s.url,class:j(["px-3 py-2 text-sm border rounded-none",s.active?"bg-primary text-white border-primary":"bg-surface-1 text-text border-border hover:bg-surface-2"]),innerHTML:s.label},null,8,["href","class","innerHTML"])):(l(),o("span",{key:1,class:"px-3 py-2 text-sm text-muted border border-border rounded-none",innerHTML:s.label},null,8,ke))],64))),128))])):b("",!0)],64)):(l(),o("div",be,[...t[21]||(t[21]=[e("svg",{class:"mx-auto h-12 w-12 text-text-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M4 6h4l2-3h4l2 3h4v12H4z"})],-1),e("p",{class:"mt-4 text-muted"}," Belum ada data selfie untuk filter yang dipilih. ",-1)])]))]),_:1})])]),_:1})],64))}};export{je as default};

import{r as K,m as N,c as D,a as r,b as i,h as o,i as $,w as n,e as t,q as v,v as f,o as d,F as u,j as x,t as l,G as g,d as h,A as w,n as O,k as H,l as I,B as R}from"./app-Bi7HOOmg.js";import{A as q}from"./AuthenticatedLayout-CosheEKI.js";import{_ as m}from"./Card.vue_vue_type_script_setup_true_lang-Bwwk7C6e.js";import{_ as k}from"./Button.vue_vue_type_script_setup_true_lang-CLgP9_cW.js";import{B as z}from"./Breadcrumb-WjWOs7bQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"space-y-6"},G={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},J={class:"flex gap-2"},Q={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},W={class:"p-4 space-y-4"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Y=["value"],Z={class:"p-4 space-y-3"},tt={class:"space-y-3"},et=["value"],st=["value"],lt={key:0,class:"text-xs text-danger"},at={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ot={class:"p-4"},dt={class:"text-3xl font-bold text-text"},rt={class:"p-4"},it={class:"text-3xl font-bold text-success"},nt={class:"p-4"},ut={class:"text-3xl font-bold text-info"},pt={class:"p-4 space-y-4"},ct={class:"overflow-x-auto"},ft={class:"min-w-full divide-y divide-border text-sm"},xt={class:"divide-y divide-border"},mt={key:0},yt={class:"px-4 py-3"},_t={class:"font-semibold"},bt={class:"text-xs text-muted"},vt={class:"px-4 py-3"},gt={class:"font-semibold"},ht={class:"text-xs text-muted"},wt={class:"px-4 py-3"},kt={class:"px-4 py-3"},St={key:0,class:"flex flex-wrap gap-2 pt-2"},jt={__name:"Assignment",props:{employeeShifts:{type:Object,default:()=>({data:[],links:[]})},employees:{type:Array,default:()=>[]},shifts:{type:Array,default:()=>[]},outlets:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})}},setup(y){var B;const S=y,T=[{name:"Dashboard",href:route("dashboard")},{name:"Manajemen Shift",href:route("shifts.index")},{name:"Penugasan Shift"}],b=K({outlet_id:((B=S.filters)==null?void 0:B.outlet_id)||""}),a=N({user_id:"",shift_id:"",start_date:"",end_date:"",notes:""}),p=D(()=>S.employeeShifts||{data:[],links:[]}),M=D(()=>(p.value.data||[]).filter(_=>_.is_active).length),A=()=>{R.get(route("shifts.assign.index"),b.value,{preserveState:!0,preserveScroll:!0})},U=()=>{b.value.outlet_id="",A()},L=()=>{a.post(route("shifts.assign.employee"),{preserveScroll:!0,onSuccess:()=>a.reset("notes")})},P=_=>_?new Date(_).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-";return(_,s)=>(d(),r(u,null,[i(o($),{title:"Penugasan Shift"}),i(q,null,{breadcrumb:n(()=>[i(z,{items:T})]),default:n(()=>[t("div",E,[t("div",G,[s[8]||(s[8]=t("div",null,[t("h1",{class:"text-3xl font-bold text-text"}," Penugasan Shift "),t("p",{class:"text-muted"}," Atur penugasan karyawan dan pantau riwayatnya ")],-1)),t("div",J,[i(k,{variant:"secondary",onClick:U},{default:n(()=>[...s[6]||(s[6]=[v(" Reset Filter ",-1)])]),_:1}),i(k,{onClick:A},{default:n(()=>[...s[7]||(s[7]=[v("Terapkan Filter",-1)])]),_:1})])]),t("div",Q,[i(m,{class:"lg:col-span-2"},{default:n(()=>[t("div",W,[s[11]||(s[11]=t("h2",{class:"text-lg font-semibold text-text"}," Filter Penugasan ",-1)),t("div",X,[t("div",null,[s[10]||(s[10]=t("label",{class:"block text-sm text-muted mb-1"},"Outlet",-1)),f(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>b.value.outlet_id=e),class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},[s[9]||(s[9]=t("option",{value:""},"Semua Outlet",-1)),(d(!0),r(u,null,x(y.outlets,e=>(d(),r("option",{key:e.id,value:e.id},l(e.name),9,Y))),128))],512),[[g,b.value.outlet_id]])])])])]),_:1}),i(m,null,{default:n(()=>[t("div",Z,[s[14]||(s[14]=t("h3",{class:"text-lg font-semibold text-text"}," Penugasan Baru ",-1)),t("div",tt,[f(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>o(a).user_id=e),class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},[s[12]||(s[12]=t("option",{value:""},"Pilih Karyawan",-1)),(d(!0),r(u,null,x(y.employees,e=>(d(),r("option",{key:e.id,value:e.id},l(e.name)+" Â· Outlet #"+l(e.outlet_id||"-"),9,et))),128))],512),[[g,o(a).user_id]]),f(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>o(a).shift_id=e),class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},[s[13]||(s[13]=t("option",{value:""},"Pilih Shift",-1)),(d(!0),r(u,null,x(y.shifts,e=>(d(),r("option",{key:e.id,value:e.id},l(e.name),9,st))),128))],512),[[g,o(a).shift_id]]),f(t("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>o(a).start_date=e),type:"date",class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},null,512),[[w,o(a).start_date]]),f(t("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>o(a).end_date=e),type:"date",class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg",placeholder:"Opsional"},null,512),[[w,o(a).end_date]]),f(t("textarea",{"onUpdate:modelValue":s[5]||(s[5]=e=>o(a).notes=e),rows:"2",class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg",placeholder:"Catatan tambahan"},null,512),[[w,o(a).notes]]),i(k,{class:"w-full",disabled:o(a).processing,onClick:L},{default:n(()=>[v(l(o(a).processing?"Menyimpan...":"Assign Shift"),1)]),_:1},8,["disabled"]),Object.keys(o(a).errors).length?(d(),r("div",lt,[(d(!0),r(u,null,x(o(a).errors,(e,c)=>(d(),r("div",{key:c},l(e),1))),128))])):h("",!0)])])]),_:1})]),t("div",at,[i(m,null,{default:n(()=>{var e;return[t("div",ot,[s[15]||(s[15]=t("p",{class:"text-sm text-muted"},"Total Penugasan",-1)),t("p",dt,l(((e=p.value.data)==null?void 0:e.length)||0),1)])]}),_:1}),i(m,null,{default:n(()=>[t("div",rt,[s[16]||(s[16]=t("p",{class:"text-sm text-muted"},"Penugasan Aktif",-1)),t("p",it,l(M.value),1)])]),_:1}),i(m,null,{default:n(()=>[t("div",nt,[s[17]||(s[17]=t("p",{class:"text-sm text-muted"},"Total Karyawan",-1)),t("p",ut,l(y.employees.length),1)])]),_:1})]),i(m,null,{default:n(()=>[t("div",pt,[s[20]||(s[20]=t("h2",{class:"text-lg font-semibold text-text"}," Riwayat Penugasan ",-1)),t("div",ct,[t("table",ft,[s[19]||(s[19]=t("thead",null,[t("tr",{class:"text-left text-xs uppercase text-muted"},[t("th",{class:"px-4 py-3"},"Karyawan"),t("th",{class:"px-4 py-3"},"Shift"),t("th",{class:"px-4 py-3"},"Periode"),t("th",{class:"px-4 py-3"},"Status")])],-1)),t("tbody",xt,[(p.value.data||[]).length===0?(d(),r("tr",mt,[...s[18]||(s[18]=[t("td",{colspan:"4",class:"px-4 py-6 text-center text-muted"}," Belum ada penugasan. ",-1)])])):h("",!0),(d(!0),r(u,null,x(p.value.data,e=>{var c,F,V,C,j;return d(),r("tr",{key:e.id},[t("td",yt,[t("p",_t,l(((c=e.user)==null?void 0:c.name)||`Karyawan #${e.user_id}`),1),t("p",bt,l(((F=e.user)==null?void 0:F.email)||"-"),1)]),t("td",vt,[t("p",gt,l(((V=e.shift)==null?void 0:V.name)||"-"),1),t("p",ht,l((C=e.shift)!=null&&C.start_time?e.shift.start_time.slice(0,5):"-")+" - "+l((j=e.shift)!=null&&j.end_time?e.shift.end_time.slice(0,5):"-"),1)]),t("td",wt,l(P(e.start_date))+" - "+l(e.end_date?P(e.end_date):"Berjalan"),1),t("td",kt,[t("span",{class:O(["inline-flex px-2 py-1 rounded-full text-xs",e.is_active?"bg-success-100 text-success-800":"bg-gray-100 text-gray-600"])},l(e.is_active?"Aktif":"Selesai"),3)])])}),128))])])]),p.value.links?(d(),r("div",St,[(d(!0),r(u,null,x(p.value.links,(e,c)=>(d(),H(o(I),{key:c,href:e.url||"#",class:O(["px-3 py-1 rounded border border-border text-sm",[e.active?"bg-primary text-white border-primary":"bg-surface-1 text-text",!e.url&&"opacity-50 pointer-events-none"]]),innerHTML:e.label},null,8,["href","class","innerHTML"]))),128))])):h("",!0)])]),_:1})])]),_:1})],64))}};export{jt as default};

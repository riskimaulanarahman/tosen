import{r as B,a as i,b as d,h as w,i as H,w as u,e as t,q as p,t as r,v as g,o as n,F as v,j as b,G as I,A as S,d as z,n as T,k as P,l as U,B as E}from"./app-DLRClR93.js";import{A as R}from"./AuthenticatedLayout-X2c9acdw.js";import{_ as m}from"./Card.vue_vue_type_script_setup_true_lang-BPYeHnK8.js";import{_ as h}from"./Button.vue_vue_type_script_setup_true_lang-BEwuWev6.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"space-y-6"},$={class:"flex items-center justify-between"},K={class:"flex items-center space-x-4"},q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},G={class:"bg-surface-2 rounded-lg p-4"},J={class:"text-2xl font-bold text-primary"},Q={class:"bg-surface-2 rounded-lg p-4"},W={class:"text-2xl font-bold text-info"},X={class:"bg-surface-2 rounded-lg p-4"},Y={class:"text-2xl font-bold text-success"},Z={class:"bg-surface-2 rounded-lg p-4"},tt={class:"text-2xl font-bold text-warning"},et={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},st=["value"],at={class:"flex items-end space-x-2"},ot={class:"flex items-center justify-between mb-6"},rt={class:"text-sm text-muted"},nt={key:0,class:"overflow-x-auto"},lt={class:"min-w-full divide-y divide-border"},it={class:"bg-surface-1 divide-y divide-border"},dt={class:"px-6 py-4"},ut={class:"text-sm font-medium text-text"},ct={class:"text-sm text-text-3"},xt={class:"px-6 py-4"},mt={class:"text-sm text-text-3"},ft={class:"px-6 py-4"},pt={class:"text-sm text-text-3"},vt={class:"px-6 py-4"},ht={class:"text-sm text-success"},_t={class:"px-6 py-4"},gt={key:0,class:"text-sm text-warning"},bt={key:1,class:"text-sm text-muted"},kt={class:"px-6 py-4"},yt={class:"text-sm text-text-3"},wt={class:"px-6 py-4"},St={key:1,class:"text-center py-12"},Tt={key:2,class:"mt-6"},Ct=["innerHTML"],Mt={__name:"Index",props:{attendances:Object,outlets:Array,stats:Object,filters:Object},setup(c){const _=c,o=B({outlet_id:_.filters.outlet_id||"",date_from:_.filters.date_from||"",date_to:_.filters.date_to||""}),k=()=>{E.get(route("reports.index"),{...o.value},{preserveState:!0,preserveScroll:!0})},C=()=>{o.value={outlet_id:"",date_from:"",date_to:""},k()},M=()=>{const s=new URLSearchParams;Object.keys(o.value).forEach(e=>{o.value[e]&&s.append(e,o.value[e])}),window.location.href=route("reports.export")+"?"+s.toString()},D=()=>{const s=new URLSearchParams;Object.keys(o.value).forEach(e=>{o.value[e]&&s.append(e,o.value[e])}),window.location.href=route("reports.summary")+"?"+s.toString()},j=()=>{const s=new URLSearchParams;Object.keys(o.value).forEach(e=>{o.value[e]&&s.append(e,o.value[e])}),window.location.href=route("reports.pivot")+"?"+s.toString()},V=s=>new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}),y=s=>new Date(s).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),L=s=>{if(!s.check_out_time)return"Masih check-in";const e=new Date(s.check_in_time),f=new Date(s.check_out_time)-e,a=Math.floor(f/(1e3*60*60)),x=Math.floor(f%(1e3*60*60)/(1e3*60));return`${a}j ${x}m`},O=s=>{switch(s){case"checked_in":return"bg-success-100 text-success";case"checked_out":return"bg-surface-3 text-text-3";default:return"bg-surface-3 text-text-3"}},A=s=>{switch(s){case"checked_in":return"Check-in";case"checked_out":return"Selesai";default:return s}};return(s,e)=>(n(),i(v,null,[d(w(H),{title:"Laporan Absensi"}),d(R,null,{default:u(()=>[t("div",N,[t("div",$,[e[6]||(e[6]=t("div",null,[t("h1",{class:"text-2xl font-bold text-text",style:{"font-family":"'Oswald', sans-serif"}}," Laporan Absensi "),t("p",{class:"text-muted"},"Analisis data absensi karyawan")],-1)),t("div",K,[d(h,{onClick:j,variant:"secondary"},{default:u(()=>[...e[3]||(e[3]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1),p(" Pivot Table ",-1)])]),_:1}),d(h,{onClick:D,variant:"secondary"},{default:u(()=>[...e[4]||(e[4]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),p(" Ringkasan ",-1)])]),_:1}),d(h,{onClick:M,variant:"primary"},{default:u(()=>[...e[5]||(e[5]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),p(" Export CSV ",-1)])]),_:1})])]),t("div",q,[d(m,null,{default:u(()=>[t("div",G,[t("div",J,r(c.stats.total_attendances),1),e[7]||(e[7]=t("div",{class:"text-sm text-muted"},"Total Absensi",-1))])]),_:1}),d(m,null,{default:u(()=>[t("div",Q,[t("div",W,r(c.stats.total_employees),1),e[8]||(e[8]=t("div",{class:"text-sm text-muted"},"Total Karyawan",-1))])]),_:1}),d(m,null,{default:u(()=>[t("div",X,[t("div",Y,r(c.stats.total_outlets),1),e[9]||(e[9]=t("div",{class:"text-sm text-muted"},"Total Outlet",-1))])]),_:1}),d(m,null,{default:u(()=>[t("div",Z,[t("div",tt,r(c.stats.this_month_attendances),1),e[10]||(e[10]=t("div",{class:"text-sm text-muted"},"Absensi Bulan Ini",-1))])]),_:1})]),d(m,null,{default:u(()=>[t("div",et,[t("div",null,[e[12]||(e[12]=t("label",{class:"block text-text-3 text-sm font-medium mb-2"}," Outlet ",-1)),g(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.outlet_id=l),class:"w-full px-3 py-2 bg-surface-1 border border-border text-text rounded-none focus:outline-none focus:ring-2 focus:ring-primary"},[e[11]||(e[11]=t("option",{value:""},"Semua Outlet",-1)),(n(!0),i(v,null,b(c.outlets,l=>(n(),i("option",{key:l.id,value:l.id},r(l.name),9,st))),128))],512),[[I,o.value.outlet_id]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-text-3 text-sm font-medium mb-2"}," Dari Tanggal ",-1)),g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.date_from=l),type:"date",class:"w-full px-3 py-2 bg-surface-1 border border-border text-text rounded-none focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[S,o.value.date_from]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-text-3 text-sm font-medium mb-2"}," Sampai Tanggal ",-1)),g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.date_to=l),type:"date",class:"w-full px-3 py-2 bg-surface-1 border border-border text-text rounded-none focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[S,o.value.date_to]])]),t("div",at,[d(h,{onClick:k,variant:"primary"},{default:u(()=>[...e[15]||(e[15]=[p(" Terapkan ",-1)])]),_:1}),d(h,{onClick:C,variant:"secondary"},{default:u(()=>[...e[16]||(e[16]=[p(" Reset ",-1)])]),_:1})])])]),_:1}),d(m,null,{default:u(()=>{var l,f;return[t("div",ot,[e[17]||(e[17]=t("h3",{class:"text-lg font-semibold text-text"}," Data Absensi ",-1)),t("div",rt," Menampilkan "+r(((l=c.attendances.data)==null?void 0:l.length)||0)+" record ",1)]),((f=c.attendances.data)==null?void 0:f.length)>0?(n(),i("div",nt,[t("table",lt,[e[18]||(e[18]=t("thead",{class:"bg-surface-2"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-text-3 uppercase tracking-wider"}," Karyawan "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-text-3 uppercase tracking-wider"}," Outlet "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-text-3 uppercase tracking-wider"}," Tanggal "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-text-3 uppercase tracking-wider"}," Check In "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-text-3 uppercase tracking-wider"}," Check Out "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-text-3 uppercase tracking-wider"}," Durasi "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-text-3 uppercase tracking-wider"}," Status ")])],-1)),t("tbody",it,[(n(!0),i(v,null,b(c.attendances.data,a=>{var x;return n(),i("tr",{key:a.id,class:"hover:bg-surface-2"},[t("td",dt,[t("div",null,[t("div",ut,r(a.user.name),1),t("div",ct,r(a.user.email),1)])]),t("td",xt,[t("div",mt,r(((x=a.user.outlet)==null?void 0:x.name)||"-"),1)]),t("td",ft,[t("div",pt,r(V(a.created_at)),1)]),t("td",vt,[t("div",ht,r(y(a.check_in_time)),1)]),t("td",_t,[a.check_out_time?(n(),i("div",gt,r(y(a.check_out_time)),1)):(n(),i("div",bt," - "))]),t("td",kt,[t("div",yt,r(L(a)),1)]),t("td",wt,[t("span",{class:T(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",O(a.status)])},r(A(a.status)),3)])])}),128))])])])):(n(),i("div",St,[...e[19]||(e[19]=[t("svg",{class:"mx-auto h-12 w-12 text-text-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v1a1 1 0 001 1h4a1 1 0 001-1v-1m3-2V8a2 2 0 00-2-2H8a2 2 0 00-2 2v6a2 2 0 002 2zm6-4V7a1 1 0 011-1h4a1 1 0 011 1v6a1 1 0 01-1 1h-4a1 1 0 01-1-1z"})],-1),t("h3",{class:"mt-2 text-sm font-medium text-text-3"}," Tidak ada data ",-1),t("p",{class:"mt-1 text-sm text-muted"}," Tidak ada data absensi yang sesuai dengan filter yang dipilih. ",-1)])])),c.attendances.links?(n(),i("div",Tt,[(n(!0),i(v,null,b(c.attendances.links,(a,x)=>(n(),i(v,{key:x},[a.url?(n(),P(w(U),{key:0,href:a.url,class:T(["px-3 py-2 text-sm border rounded-none",a.active?"bg-primary text-white border-primary":"bg-surface-1 text-text border-border hover:bg-surface-2"]),innerHTML:a.label},null,8,["href","class","innerHTML"])):(n(),i("span",{key:1,class:"px-3 py-2 text-sm text-muted border border-border rounded-none",innerHTML:a.label},null,8,Ct))],64))),128))])):z("",!0)]}),_:1})])]),_:1})],64))}},At=F(Mt,[["__scopeId","data-v-018d2e10"]]);export{At as default};

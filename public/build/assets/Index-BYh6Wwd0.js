import{u as U,c as F,r as $,a as p,b as a,h as m,i as G,w as l,e as t,d as v,l as f,q as i,o as u,t as n,v as g,A as _,G as R,F as h,j as V,n as k,k as q,B as A}from"./app-B9127wO6.js";import{A as E}from"./AuthenticatedLayout-BhaAR9wv.js";import{_ as w}from"./Card.vue_vue_type_script_setup_true_lang-Yr55VJw9.js";import{_ as c}from"./Button.vue_vue_type_script_setup_true_lang-B_FY260r.js";import{B as K}from"./Breadcrumb-uliv-1Bc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"space-y-6"},Q={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},W={key:0,class:"bg-success-900/20 border border-success-700 text-success-100 p-4 rounded-lg"},X={key:1,class:"bg-danger-900/20 border border-danger-700 text-danger-100 p-4 rounded-lg"},Y={class:"p-4 space-y-4"},Z={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},tt={class:"flex items-end gap-2"},et={class:"grid grid-cols-1 xl:grid-cols-3 gap-6"},st={class:"p-6 space-y-4"},at={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},lt={class:"text-sm text-muted"},rt={class:"overflow-x-auto"},ot={class:"min-w-full divide-y divide-border text-sm"},dt={class:"bg-surface-1 divide-y divide-border"},nt={key:0},it={class:"px-6 py-4"},ut={class:"font-semibold text-text"},pt={class:"text-xs text-muted"},mt={class:"px-6 py-4"},ct={class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-surface-2 text-text"},ft={class:"px-6 py-4"},xt={class:"font-medium text-text"},bt={class:"text-xs text-muted"},yt={class:"px-6 py-4"},vt={class:"px-6 py-4 text-right space-x-2"},gt={key:0,class:"flex flex-wrap gap-2 pt-4 justify-center"},_t={class:"space-y-6"},ht={class:"p-6 space-y-3"},kt={class:"space-y-2"},Dt={__name:"Index",props:{payrollPeriods:{type:Object,default:()=>({data:[],links:[]})},filters:{type:Object,default:()=>({})}},setup(N){var P,C,M,S;const x=N,I=U(),y=F(()=>I.props.flash||{}),b=F(()=>x.payrollPeriods||{data:[],links:[]}),O=[{name:"Dashboard",href:route("dashboard")},{name:"Manajemen Penggajian"}],o=$({outlet_id:((P=x.filters)==null?void 0:P.outlet_id)||"",status:((C=x.filters)==null?void 0:C.status)||"active",date_from:((M=x.filters)==null?void 0:M.date_from)||"",date_to:((S=x.filters)==null?void 0:S.date_to)||""}),z=r=>r==null?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(Number(r)),j=()=>{A.get(route("payroll.index"),o.value,{preserveScroll:!0,preserveState:!0})},H=()=>{o.value={outlet_id:"",status:"active",date_from:"",date_to:""},j()},L=r=>{r!=null&&r.id&&confirm(`Hapus periode "${r.name}"? Tindakan ini tidak dapat dibatalkan.`)&&A.delete(route("payroll.destroy",r.id),{preserveScroll:!0})};return(r,e)=>(u(),p(h,null,[a(m(G),{title:"Manajemen Penggajian"}),a(E,null,{breadcrumb:l(()=>[a(K,{items:O})]),default:l(()=>{var D,B;return[t("div",J,[t("div",Q,[e[5]||(e[5]=t("div",null,[t("h1",{class:"text-2xl font-bold text-text",style:{"font-family":"'Oswald', sans-serif"}}," Manajemen Penggajian "),t("p",{class:"text-muted"}," Kelola periode payroll, proses perhitungan, dan status pembayaran ")],-1)),a(m(f),{href:r.route("payroll.create.page")},{default:l(()=>[a(c,null,{default:l(()=>[...e[4]||(e[4]=[i("Tambah Periode",-1)])]),_:1})]),_:1},8,["href"])]),(D=y.value)!=null&&D.success?(u(),p("div",W,n(y.value.success),1)):v("",!0),(B=y.value)!=null&&B.error?(u(),p("div",X,n(y.value.error),1)):v("",!0),a(w,null,{default:l(()=>[t("div",Y,[e[13]||(e[13]=t("h2",{class:"text-lg font-semibold text-text"}," Filter Periode ",-1)),t("div",Z,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm text-muted mb-1"},"ID Outlet",-1)),g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>o.value.outlet_id=d),type:"number",min:"1",placeholder:"Contoh: 1",class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},null,512),[[_,o.value.outlet_id]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm text-muted mb-1"},"Status",-1)),g(t("select",{"onUpdate:modelValue":e[1]||(e[1]=d=>o.value.status=d),class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},[...e[7]||(e[7]=[t("option",{value:""},"Semua",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"paid"},"Paid",-1),t("option",{value:"draft"},"Draft",-1)])],512),[[R,o.value.status]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm text-muted mb-1"},"Tanggal Mulai",-1)),g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=d=>o.value.date_from=d),type:"date",class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},null,512),[[_,o.value.date_from]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm text-muted mb-1"},"Tanggal Akhir",-1)),g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=d=>o.value.date_to=d),type:"date",class:"w-full px-3 py-2 bg-surface-2 border border-border rounded-lg"},null,512),[[_,o.value.date_to]])]),t("div",tt,[a(c,{class:"flex-1",onClick:j},{default:l(()=>[...e[11]||(e[11]=[i("Terapkan",-1)])]),_:1}),a(c,{variant:"secondary",class:"flex-1",onClick:H},{default:l(()=>[...e[12]||(e[12]=[i("Reset",-1)])]),_:1})])])])]),_:1}),t("div",et,[a(w,{class:"xl:col-span-2"},{default:l(()=>{var d;return[t("div",st,[t("div",at,[t("div",null,[e[14]||(e[14]=t("h2",{class:"text-xl font-bold text-text"}," Daftar Periode Payroll ",-1)),t("p",lt," Menampilkan "+n(((d=b.value.data)==null?void 0:d.length)||0)+" periode terbaru ",1)]),a(m(f),{href:r.route("payroll.statistics"),class:"text-primary text-sm font-medium hover:text-primary-600 transition-colors"},{default:l(()=>[...e[15]||(e[15]=[i(" Statistik Penggajian â†’ ",-1)])]),_:1},8,["href"])]),t("div",rt,[t("table",ot,[e[19]||(e[19]=t("thead",null,[t("tr",{class:"text-left text-xs uppercase text-muted bg-surface-1"},[t("th",{class:"px-6 py-3"},"Periode"),t("th",{class:"px-6 py-3"},"Durasi"),t("th",{class:"px-6 py-3"},"Tarif"),t("th",{class:"px-6 py-3"},"Status"),t("th",{class:"px-6 py-3 text-right"}," Aksi ")])],-1)),t("tbody",dt,[(b.value.data||[]).length===0?(u(),p("tr",nt,[...e[16]||(e[16]=[t("td",{colspan:"5",class:"px-6 py-8 text-center text-muted"},[t("div",{class:"flex flex-col items-center"},[t("svg",{class:"w-12 h-12 text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3-1.343-3-3S10.343 2 12 2s3 1.343 3 3 3 3-1.343 3-3-1.657z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 2v6m0 0l-3 3m3-3l3 3m-6 0h6"})]),t("p",{class:"text-lg font-medium"}," Belum ada periode payroll "),t("p",{class:"text-sm mt-1"}," Silakan buat periode payroll terlebih dahulu ")])],-1)])])):v("",!0),(u(!0),p(h,null,V(b.value.data,s=>(u(),p("tr",{key:s.id,class:"hover:bg-surface-2 transition-colors"},[t("td",it,[t("div",null,[t("p",ut,n(s.name),1),t("p",pt," Mulai "+n(s.start_date)+" s/d "+n(s.end_date),1)])]),t("td",mt,[t("span",ct,n(s.duration_days||0)+" hari ",1)]),t("td",ft,[t("div",null,[t("p",xt,n(z(s.basic_rate)),1),t("p",bt," Overtime x"+n(Number(s.overtime_rate||0).toFixed(2)),1)])]),t("td",yt,[t("span",{class:k(["inline-flex items-center px-3 py-1 rounded-full text-xs font-medium",s.status==="completed"?"bg-success-100 text-success-800":s.status==="active"?"bg-primary-100 text-primary-800":s.status==="paid"?"bg-info-100 text-info-800":"bg-gray-100 text-gray-600"])},[t("span",{class:k(["w-2 h-2 rounded-full mr-2",s.status==="completed"?"bg-success-500":s.status==="active"?"bg-primary-500":s.status==="paid"?"bg-info-500":"bg-gray-500"])},null,2),i(" "+n(s.status),1)],2)]),t("td",vt,[a(m(f),{href:r.route("payroll.show",s.id)},{default:l(()=>[a(c,{size:"sm",variant:"secondary"},{default:l(()=>[...e[17]||(e[17]=[i("Detail",-1)])]),_:1})]),_:1},8,["href"]),a(c,{size:"sm",variant:"ghost",onClick:T=>L(s),disabled:s.status==="paid"},{default:l(()=>[...e[18]||(e[18]=[i(" Hapus ",-1)])]),_:1},8,["onClick","disabled"])])]))),128))])])]),b.value.links?(u(),p("div",gt,[(u(!0),p(h,null,V(b.value.links,(s,T)=>(u(),q(m(f),{key:T,href:s.url||"#",class:k(["px-4 py-2 rounded-lg border text-sm font-medium transition-colors",[s.active?"bg-primary text-white border-primary hover:bg-primary-600":"bg-surface-1 text-text border-border hover:bg-surface-2",!s.url&&"opacity-50 cursor-not-allowed"]]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])):v("",!0)])]}),_:1}),t("div",_t,[a(w,{class:"hover:shadow-lg transition-shadow"},{default:l(()=>[t("div",ht,[e[22]||(e[22]=t("h3",{class:"text-lg font-semibold text-text"},"Aksi Cepat",-1)),e[23]||(e[23]=t("p",{class:"text-sm text-muted"}," Gunakan halaman khusus untuk membuat periode baru atau menjalankan proses payroll secara menyeluruh. ",-1)),t("div",kt,[a(m(f),{href:r.route("payroll.create.page")},{default:l(()=>[a(c,{variant:"secondary",class:"w-full"},{default:l(()=>[...e[20]||(e[20]=[i(" Buat / Generate Payroll ",-1)])]),_:1})]),_:1},8,["href"]),a(m(f),{href:r.route("payroll.statistics")},{default:l(()=>[a(c,{variant:"ghost",class:"w-full"},{default:l(()=>[...e[21]||(e[21]=[i(" Statistik Payroll ",-1)])]),_:1})]),_:1},8,["href"])])])]),_:1})])])])]}),_:1})],64))}};export{Dt as default};
